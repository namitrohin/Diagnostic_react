{"ast":null,"code":"var _jsxFileName = \"F:\\\\React code\\\\diagnostic\\\\src\\\\pages\\\\Master\\\\employee\\\\addEntry.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport { showErrorToast, showSuccessToast } from \"../../../components/common\";\nimport { CommonController } from \"../../../_redux/controller/common.controller\";\nimport GeneralInfoEmp from \"./general\";\nimport OtherDetails from \"./other\";\nimport { useSelector } from \"react-redux\";\nimport { ifStatement } from \"@babel/types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddEmployee = ({\n  onClose\n}) => {\n  _s();\n\n  const selectedIdResponse = useSelector(state => state.AllReducersMaster.employeeId);\n  const [selectedTab, setSelectedTab] = useState(0);\n  const [listValues, setListValues] = useState({\n    empList: [],\n    desgnList: [],\n    depInchrList: []\n  });\n  const [formData, setFormData] = useState({\n    pr_check: false,\n    user_id: 0,\n    user_code: \"\",\n    attendance_emp_code: \"\",\n    ctc_per_day: \"\",\n    card_no: \"\",\n    short_name: \"\",\n    first_name: \"\",\n    last_name: \"\",\n    f_h_name: \"\",\n    mother_name: \"\",\n    m_status: \"\",\n    gender: \"\",\n    dob: null,\n    pr_add1: \"\",\n    pr_phone: \"\",\n    pr_mobile: \"\",\n    pt_add1: \"\",\n    pt_phone: \"\",\n    pt_mobile: \"\",\n    department_name: \"\",\n    designation_name: \"\",\n    joining_date: null,\n    leaving_date: null,\n    leaving_reason: \"\",\n    dispensary: \"\",\n    remarks: \"\",\n    department_incharge: \"\",\n    user_name: \"\",\n    password: \"\",\n    email: \"\",\n    pf_code: \"\",\n    esi_code: \"\",\n    pan_no: \"\",\n    salary_p_mode: 1,\n    account_no: \"\",\n    bank_name: \"\",\n    nominee: \"\",\n    edit_button: \"\",\n    disable: \"\",\n    login_user_id: \"\",\n    login_user_name: \"\",\n    sign_path: \"\"\n  });\n  useEffect(() => {\n    if (selectedIdResponse) {\n      CommonController.commonApiCallFilter(\"Employee/EmployeeMasterPreview\", {\n        user_id: selectedIdResponse\n      }).then(data => {\n        // setFormData(data);\n        let tempData = { ...formData\n        };\n\n        for (let key in formData) {\n          if (data.hasOwnProperty(key)) {\n            tempData[key] = data[key];\n          }\n        }\n\n        setFormData(tempData);\n      }).catch(err => {\n        showErrorToast(err);\n      });\n    }\n  }, [selectedIdResponse]);\n\n  const handleChange = e => {\n    setFormData({ ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleDateChange = (name, date) => {\n    setFormData({ ...formData,\n      [name]: date\n    });\n  };\n\n  const handleAutoChange = (name, value) => {\n    setFormData({ ...formData,\n      [name]: value ? value.value : null\n    });\n  };\n\n  const getAutoValue = (key, arr, val) => {\n    const value = arr.filter(x => x[key] === val);\n    return value && value.length > 0 ? value[0] : null;\n  };\n\n  const handleTabChange = index => {\n    setSelectedTab(index);\n  };\n\n  const setPRAddress = e => {\n    if (e.target.checked) {\n      setFormData({ ...formData,\n        pr_check: e.target.checked,\n        pr_add1: formData.pt_add1\n      });\n    } else {\n      setFormData({ ...formData,\n        pr_check: e.target.checked,\n        pr_add1: \"\"\n      });\n    }\n  };\n\n  useEffect(() => {\n    CommonController.commonApiCallFilter(\"Employee/EmployeeMasterDropdown\").then(data => {\n      setListValues({\n        empList: data.empList,\n        desgnList: data.desgnList,\n        depInchrList: data.depInchrList\n      });\n    }).catch(err => {\n      showErrorToast(err);\n    });\n  }, []);\n\n  const onNext = () => {\n    if (selectedTab === 0) {\n      setSelectedTab(1);\n    } else {\n      onSubmit();\n    }\n  };\n\n  const onBack = () => {\n    setSelectedTab(0);\n  };\n\n  const onSubmit = () => {\n    CommonController.commonApiCallFilter(\"Employee/EmployeeMasterInsert\", formData).then(data => {\n      if (data.valid) {\n        showSuccessToast(`Employee ${selectedIdResponse ? \"updated\" : \"created\"} successfully`);\n      }\n    }).catch(err => {\n      showErrorToast(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid mt-5 pt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"nav nav-tabs nav-tabs-line\",\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: `nav-link ` + (selectedTab === 0 ? \"active\" : \"\"),\n          onClick: () => handleTabChange(0),\n          children: \"General Information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: `nav-link ` + (selectedTab === 1 ? \"active\" : \"\"),\n          onClick: () => handleTabChange(1),\n          children: \"Other Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tab-content mt-10\",\n      children: [selectedTab === 0 && /*#__PURE__*/_jsxDEV(GeneralInfoEmp, {\n        formData: formData,\n        handleChange: handleChange,\n        handleDateChange: handleDateChange,\n        handleAutoChange: handleAutoChange,\n        getAutoValue: getAutoValue,\n        listValues: listValues,\n        onCheckChange: setPRAddress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }, this), selectedTab === 1 && /*#__PURE__*/_jsxDEV(OtherDetails, {\n        formData: formData,\n        handleChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-100 text-right\",\n        children: [selectedTab === 1 && /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: onBack,\n          className: \"mr-3\",\n          color: \"primary\",\n          disableElevation: true,\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: onNext,\n          color: \"primary\",\n          disableElevation: true,\n          children: selectedTab === 1 ? \"Submit\" : \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AddEmployee, \"NduA7A9os01Dniem2NeakmjVw4U=\", false, function () {\n  return [useSelector];\n});\n\n_c = AddEmployee;\nexport default AddEmployee;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddEmployee\");","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/Master/employee/addEntry.js"],"names":["React","useEffect","useState","Button","showErrorToast","showSuccessToast","CommonController","GeneralInfoEmp","OtherDetails","useSelector","ifStatement","AddEmployee","onClose","selectedIdResponse","state","AllReducersMaster","employeeId","selectedTab","setSelectedTab","listValues","setListValues","empList","desgnList","depInchrList","formData","setFormData","pr_check","user_id","user_code","attendance_emp_code","ctc_per_day","card_no","short_name","first_name","last_name","f_h_name","mother_name","m_status","gender","dob","pr_add1","pr_phone","pr_mobile","pt_add1","pt_phone","pt_mobile","department_name","designation_name","joining_date","leaving_date","leaving_reason","dispensary","remarks","department_incharge","user_name","password","email","pf_code","esi_code","pan_no","salary_p_mode","account_no","bank_name","nominee","edit_button","disable","login_user_id","login_user_name","sign_path","commonApiCallFilter","then","data","tempData","key","hasOwnProperty","catch","err","handleChange","e","target","name","value","handleDateChange","date","handleAutoChange","getAutoValue","arr","val","filter","x","length","handleTabChange","index","setPRAddress","checked","onNext","onSubmit","onBack","valid"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport { showErrorToast, showSuccessToast } from \"../../../components/common\";\nimport { CommonController } from \"../../../_redux/controller/common.controller\";\nimport GeneralInfoEmp from \"./general\";\nimport OtherDetails from \"./other\";\nimport { useSelector } from \"react-redux\";\nimport { ifStatement } from \"@babel/types\";\n\nconst AddEmployee = ({ onClose }) => {\n  const selectedIdResponse = useSelector(\n    (state) => state.AllReducersMaster.employeeId\n  );\n  const [selectedTab, setSelectedTab] = useState(0);\n  const [listValues, setListValues] = useState({\n    empList: [],\n    desgnList: [],\n    depInchrList: [],\n  });\n\n  const [formData, setFormData] = useState({\n    pr_check: false,\n    user_id: 0,\n    user_code: \"\",\n    attendance_emp_code: \"\",\n    ctc_per_day: \"\",\n    card_no: \"\",\n    short_name: \"\",\n    first_name: \"\",\n    last_name: \"\",\n    f_h_name: \"\",\n    mother_name: \"\",\n    m_status: \"\",\n    gender: \"\",\n    dob: null,\n    pr_add1: \"\",\n    pr_phone: \"\",\n    pr_mobile: \"\",\n    pt_add1: \"\",\n    pt_phone: \"\",\n    pt_mobile: \"\",\n    department_name: \"\",\n    designation_name: \"\",\n    joining_date: null,\n    leaving_date: null,\n    leaving_reason: \"\",\n    dispensary: \"\",\n    remarks: \"\",\n    department_incharge: \"\",\n    user_name: \"\",\n    password: \"\",\n    email: \"\",\n    pf_code: \"\",\n    esi_code: \"\",\n    pan_no: \"\",\n    salary_p_mode: 1,\n    account_no: \"\",\n    bank_name: \"\",\n    nominee: \"\",\n    edit_button: \"\",\n    disable: \"\",\n    login_user_id: \"\",\n    login_user_name: \"\",\n    sign_path: \"\",\n  });\n\n  useEffect(() => {\n    if (selectedIdResponse) {\n      CommonController.commonApiCallFilter(\"Employee/EmployeeMasterPreview\", {\n        user_id: selectedIdResponse,\n      })\n        .then((data) => {\n          // setFormData(data);\n          let tempData = { ...formData };\n          for (let key in formData) {\n            if (data.hasOwnProperty(key)) {\n              tempData[key] = data[key];\n            }\n          }\n          setFormData(tempData);\n        })\n        .catch((err) => {\n          showErrorToast(err);\n        });\n    }\n  }, [selectedIdResponse]);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleDateChange = (name, date) => {\n    setFormData({ ...formData, [name]: date });\n  };\n\n  const handleAutoChange = (name, value) => {\n    setFormData({ ...formData, [name]: value ? value.value : null });\n  };\n\n  const getAutoValue = (key, arr, val) => {\n    const value = arr.filter((x) => x[key] === val);\n    return value && value.length > 0 ? value[0] : null;\n  };\n\n  const handleTabChange = (index) => {\n    setSelectedTab(index);\n  };\n\n  const setPRAddress = (e) => {\n    if (e.target.checked) {\n      setFormData({\n        ...formData,\n        pr_check: e.target.checked,\n        pr_add1: formData.pt_add1,\n      });\n    } else {\n      setFormData({\n        ...formData,\n        pr_check: e.target.checked,\n        pr_add1: \"\",\n      });\n    }\n  };\n\n  useEffect(() => {\n    CommonController.commonApiCallFilter(\"Employee/EmployeeMasterDropdown\")\n      .then((data) => {\n        setListValues({\n          empList: data.empList,\n          desgnList: data.desgnList,\n          depInchrList: data.depInchrList,\n        });\n      })\n      .catch((err) => {\n        showErrorToast(err);\n      });\n  }, []);\n\n  const onNext = () => {\n    if (selectedTab === 0) {\n      setSelectedTab(1);\n    } else {\n      onSubmit();\n    }\n  };\n\n  const onBack = () => {\n    setSelectedTab(0);\n  };\n\n  const onSubmit = () => {\n    CommonController.commonApiCallFilter(\n      \"Employee/EmployeeMasterInsert\",\n      formData\n    )\n      .then((data) => {\n        if (data.valid) {\n          showSuccessToast(\n            `Employee ${\n              selectedIdResponse ? \"updated\" : \"created\"\n            } successfully`\n          );\n        }\n      })\n      .catch((err) => {\n        showErrorToast(err);\n      });\n  };\n\n  return (\n    <div className=\"container-fluid mt-5 pt-5\">\n      {/* {loading && <Loader />} */}\n      <ul className=\"nav nav-tabs nav-tabs-line\">\n        <li className=\"nav-item\">\n          <a\n            className={`nav-link ` + (selectedTab === 0 ? \"active\" : \"\")}\n            onClick={() => handleTabChange(0)}\n          >\n            General Information\n          </a>\n        </li>\n        <li className=\"nav-item\">\n          <a\n            className={`nav-link ` + (selectedTab === 1 ? \"active\" : \"\")}\n            onClick={() => handleTabChange(1)}\n          >\n            Other Details\n          </a>\n        </li>\n      </ul>\n      <div className=\"tab-content mt-10\">\n        {selectedTab === 0 && (\n          <GeneralInfoEmp\n            formData={formData}\n            handleChange={handleChange}\n            handleDateChange={handleDateChange}\n            handleAutoChange={handleAutoChange}\n            getAutoValue={getAutoValue}\n            listValues={listValues}\n            onCheckChange={setPRAddress}\n          />\n        )}\n        {selectedTab === 1 && (\n          <OtherDetails formData={formData} handleChange={handleChange} />\n        )}\n        <div className=\"w-100 text-right\">\n          {selectedTab === 1 && (\n            <Button\n              variant=\"contained\"\n              onClick={onBack}\n              className=\"mr-3\"\n              color=\"primary\"\n              disableElevation\n            >\n              Back\n            </Button>\n          )}\n          <Button\n            variant=\"contained\"\n            onClick={onNext}\n            color=\"primary\"\n            disableElevation\n          >\n            {selectedTab === 1 ? \"Submit\" : \"Next\"}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AddEmployee;\n"]},"metadata":{},"sourceType":"module"}
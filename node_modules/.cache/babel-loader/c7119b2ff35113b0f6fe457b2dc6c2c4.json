{"ast":null,"code":"import _defineProperty from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import bg from'../../assets/image/bg-5.jpg';import SimpleReactValidator from'simple-react-validator';import useForceUpdate from'use-force-update';import{FormHelperText}from'@material-ui/core';import{connect,useDispatch,useSelector}from'react-redux';import{checkAuthCred,checkAuthOTP}from'../../_redux/actions/auth.action';import GlobalAlert from'../../components/GlobalAlert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var dispatch=useDispatch();var forceUpdate=useForceUpdate();var _useState=useState(new SimpleReactValidator()),_useState2=_slicedToArray(_useState,2),validator=_useState2[0],setValidator=_useState2[1];var _useState3=useState({user_name:'',password:''}),_useState4=_slicedToArray(_useState3,2),userDetails=_useState4[0],setUserDetails=_useState4[1];var _useState5=useState({show:false,message:\"\",type:\"\"}),_useState6=_slicedToArray(_useState5,2),messageAlert=_useState6[0],setMessageAlert=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var checkAuthCredResponse=useSelector(function(state){return state.auth;});var checkAuthOtpResponse=useSelector(function(state){return state.auth.getOtpResponse;});var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),otp=_useState10[0],setOtp=_useState10[1];var handleOtp=function handleOtp(event){setOtp(event.target.value);};var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showOtp=_useState12[0],setShowOtp=_useState12[1];var handleChange=function handleChange(event){setUserDetails(_objectSpread(_objectSpread({},userDetails),{},_defineProperty({},event.target.name,event.target.value)));};var checkLogin=function checkLogin(){if(validator.fieldValid('Username')&&validator.fieldValid('Password')){dispatch(checkAuthCred(userDetails));}else{validator.showMessages();forceUpdate();}};var checkOTP=function checkOTP(){if(validator.fieldValid('OTP')){var login=\"grant_type=password&username=\".concat(userDetails.user_name,\"&password=\").concat(otp);dispatch(checkAuthOTP(login));setIsLoading(true);}else{validator.showMessages();forceUpdate();}};useEffect(function(){if(checkAuthCredResponse){setIsLoading(checkAuthCredResponse.loadingStatus);setMessageAlert(_objectSpread(_objectSpread({},messageAlert),{},{show:checkAuthCredResponse.responseMessage!==\"\",message:checkAuthCredResponse.responseMessage,type:checkAuthCredResponse.isValidCred?\"success\":\"danger\"}));setShowOtp(checkAuthCredResponse.isValidCred);}},[checkAuthCredResponse]);useEffect(function(){if(!(Object.keys(checkAuthOtpResponse).length===0&&checkAuthOtpResponse.constructor===Object)){if(checkAuthOtpResponse.valid){localStorage.setItem(\"token\",checkAuthOtpResponse.access_token);localStorage.setItem(\"login\",checkAuthOtpResponse.valid);localStorage.setItem(\"userName\",checkAuthOtpResponse.userName);localStorage.setItem(\"userId\",checkAuthOtpResponse.userId);localStorage.setItem(\"code\",checkAuthOtpResponse.code);localStorage.setItem(\"encrypt_userId\",checkAuthOtpResponse.encrypt_userId);window.location.reload();}else{setMessageAlert(_objectSpread(_objectSpread({},messageAlert),{},{show:!checkAuthOtpResponse.valid,message:checkAuthOtpResponse.message,type:checkAuthOtpResponse.valid?\"success\":\"danger\"}));setIsLoading(false);}}},[checkAuthOtpResponse]);return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column flex-root h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login login-2 login-signin-on d-flex flex-column flex-lg-row flex-column-fluid bg-white\",id:\"kt_login\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login-aside order-2 order-lg-1 d-flex flex-column-fluid flex-lg-row-auto bgi-size-cover bgi-no-repeat p-7 p-lg-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row-fluid flex-column justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column-fluid flex-column flex-center mt-5 mt-lg-0\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"mb-15 text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:\"assets/media/logos/logo-letter-1.png\",className:\"max-h-75px\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-form login-signin\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-10 mb-lg-20\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-weight-bold\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted font-weight-bold\",children:showOtp?\"OTP sent on email and whatsapp\":\"Enter your username and password\"})]}),/*#__PURE__*/_jsx(GlobalAlert,{show:messageAlert.show,type:messageAlert.type,message:messageAlert.message}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",noValidate:\"novalidate\",onSubmit:function onSubmit(e){e.preventDefault();if(showOtp){checkOTP();}else{checkLogin();}},children:[!showOtp?/*#__PURE__*/_jsxs(React.Fragment,{children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"form-group py-3 m-0\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control h-auto border-0 px-0 placeholder-dark-75\",type:\"Email\",placeholder:\"Username\",name:\"user_name\",onChange:handleChange,autoComplete:\"off\"}),/*#__PURE__*/_jsx(FormHelperText,{className:\"text-danger\",children:validator.message('Username',userDetails.user_name,'required')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group py-3 border-top m-0\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control h-auto border-0 px-0 placeholder-dark-75\",type:\"Password\",onChange:handleChange,placeholder:\"Password\",name:\"password\"}),/*#__PURE__*/_jsx(FormHelperText,{className:\"text-danger\",children:validator.message('Password',userDetails.password,'required')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group d-flex flex-wrap justify-content-between align-items-center mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-inline\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox checkbox-outline m-0 text-muted\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"remember\"}),/*#__PURE__*/_jsx(\"span\",{}),\"Remember me\"]})}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",id:\"kt_login_forgot\",className:\"text-muted text-hover-primary\",children:\"Forgot Password ?\"})]}),\" \"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"form-group py-3 border-top m-0\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control h-auto border-0 px-0 placeholder-dark-75\",type:\"Password\",onChange:handleOtp,placeholder:\"OTP\",name:\"otp\"}),/*#__PURE__*/_jsx(FormHelperText,{className:\"text-danger\",children:validator.message('OTP',otp,'required|min:4|max:4')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group d-flex flex-wrap justify-content-between align-items-center mt-2\",children:/*#__PURE__*/_jsx(\"button\",{id:\"kt_login_signin_submit\",className:\"btn btn-primary font-weight-bold w-100 px-9 py-4 my-3\",disabled:isLoading,children:isLoading?/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-spinner fa-spin\"}):showOtp?\"Submit\":\"Sign In\"})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column-auto justify-content-between mt-15\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-dark-50 font-weight-bold order-2 order-sm-1 my-2\",children:\"Developed and maintained by Rohin Infotech\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"order-1 order-lg-2 flex-column-auto flex-lg-row-fluid d-flex flex-column p-7\",style:{backgroundImage:\"url(\".concat(bg,\")\")},children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column-fluid flex-lg-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column justify-content-center\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"display-2 font-weight-bold my-7 text-white\",children:\"\\u0394IA\\u0393NO\\u2211TIX\"})})})})]})});};export default Login;","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/Auth/Login.js"],"names":["React","useEffect","useState","bg","SimpleReactValidator","useForceUpdate","FormHelperText","connect","useDispatch","useSelector","checkAuthCred","checkAuthOTP","GlobalAlert","Login","dispatch","forceUpdate","validator","setValidator","user_name","password","userDetails","setUserDetails","show","message","type","messageAlert","setMessageAlert","isLoading","setIsLoading","checkAuthCredResponse","state","auth","checkAuthOtpResponse","getOtpResponse","otp","setOtp","handleOtp","event","target","value","showOtp","setShowOtp","handleChange","name","checkLogin","fieldValid","showMessages","checkOTP","login","loadingStatus","responseMessage","isValidCred","Object","keys","length","constructor","valid","localStorage","setItem","access_token","userName","userId","code","encrypt_userId","window","location","reload","e","preventDefault","backgroundImage"],"mappings":"8aAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,EAAP,KAAe,6BAAf,CACA,MAAOC,CAAAA,oBAAP,KAAiC,wBAAjC,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,cAAT,KAA+B,mBAA/B,CACA,OAASC,OAAT,CAAkBC,WAAlB,CAA+BC,WAA/B,KAAkD,aAAlD,CACA,OAASC,aAAT,CAAwBC,YAAxB,KAA4C,kCAA5C,CACA,MAAOC,CAAAA,WAAP,KAAwB,8BAAxB,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CACnB,GAAMC,CAAAA,QAAQ,CAAGN,WAAW,EAA5B,CACA,GAAMO,CAAAA,WAAW,CAAGV,cAAc,EAAlC,CACA,cAAmCH,QAAQ,CAAC,GAAIE,CAAAA,oBAAJ,EAAD,CAA3C,wCAAOY,SAAP,eAAmBC,YAAnB,eACA,eAAuCf,QAAQ,CAAC,CAC/CgB,SAAS,CAAC,EADqC,CAE/CC,QAAQ,CAAC,EAFsC,CAAD,CAA/C,yCAAOC,WAAP,eAAqBC,cAArB,eAKA,eAAyCnB,QAAQ,CAAC,CACjDoB,IAAI,CAAC,KAD4C,CAEjDC,OAAO,CAAC,EAFyC,CAGjDC,IAAI,CAAC,EAH4C,CAAD,CAAjD,yCAAOC,YAAP,eAAsBC,eAAtB,eAMA,eAAmCxB,QAAQ,CAAC,KAAD,CAA3C,yCAAOyB,SAAP,eAAmBC,YAAnB,eAEA,GAAMC,CAAAA,qBAAqB,CAAGpB,WAAW,CAAC,SAACqB,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAjB,EAAD,CAAzC,CACA,GAAMC,CAAAA,oBAAoB,CAAGvB,WAAW,CAAC,SAACqB,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAN,CAAWE,cAAtB,EAAD,CAAxC,CAEA,eAAuB/B,QAAQ,CAAC,EAAD,CAA/B,0CAAOgC,GAAP,gBAAaC,MAAb,gBAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,CAC5BF,MAAM,CAACE,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAN,CACA,CAFD,CAIA,gBAA+BrC,QAAQ,CAAC,KAAD,CAAvC,2CAAOsC,OAAP,gBAAiBC,UAAjB,gBAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACL,KAAD,CAAW,CAC/BhB,cAAc,gCAAKD,WAAL,wBACZiB,KAAK,CAACC,MAAN,CAAaK,IADD,CACON,KAAK,CAACC,MAAN,CAAaC,KADpB,GAAd,CAGA,CAJD,CAMA,GAAMK,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACxB,GAAG5B,SAAS,CAAC6B,UAAV,CAAqB,UAArB,GAAoC7B,SAAS,CAAC6B,UAAV,CAAqB,UAArB,CAAvC,CAAwE,CACvE/B,QAAQ,CAACJ,aAAa,CAACU,WAAD,CAAd,CAAR,CACA,CAFD,IAGI,CACHJ,SAAS,CAAC8B,YAAV,GACA/B,WAAW,GACX,CACD,CARD,CAUA,GAAMgC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACtB,GAAG/B,SAAS,CAAC6B,UAAV,CAAqB,KAArB,CAAH,CAA+B,CAC9B,GAAIG,CAAAA,KAAK,wCAAmC5B,WAAW,CAACF,SAA/C,sBAAqEgB,GAArE,CAAT,CACApB,QAAQ,CAACH,YAAY,CAACqC,KAAD,CAAb,CAAR,CACApB,YAAY,CAAC,IAAD,CAAZ,CACA,CAJD,IAKI,CACHZ,SAAS,CAAC8B,YAAV,GACA/B,WAAW,GACX,CACD,CAVD,CAYAd,SAAS,CAAC,UAAM,CACf,GAAG4B,qBAAH,CAAyB,CACxBD,YAAY,CAACC,qBAAqB,CAACoB,aAAvB,CAAZ,CACAvB,eAAe,gCAAKD,YAAL,MACdH,IAAI,CAACO,qBAAqB,CAACqB,eAAtB,GAA0C,EADjC,CAEX3B,OAAO,CAACM,qBAAqB,CAACqB,eAFnB,CAGd1B,IAAI,CAACK,qBAAqB,CAACsB,WAAtB,CAAoC,SAApC,CAAgD,QAHvC,GAAf,CAKAV,UAAU,CAACZ,qBAAqB,CAACsB,WAAvB,CAAV,CACA,CACD,CAVQ,CAUP,CAACtB,qBAAD,CAVO,CAAT,CAYA5B,SAAS,CAAC,UAAM,CACf,GAAG,EAAEmD,MAAM,CAACC,IAAP,CAAYrB,oBAAZ,EAAkCsB,MAAlC,GAA6C,CAA7C,EAAkDtB,oBAAoB,CAACuB,WAArB,GAAqCH,MAAzF,CAAH,CAAoG,CACnG,GAAGpB,oBAAoB,CAACwB,KAAxB,CAA8B,CAC7BC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA6B1B,oBAAoB,CAAC2B,YAAlD,EACAF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA6B1B,oBAAoB,CAACwB,KAAlD,EACAC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAgC1B,oBAAoB,CAAC4B,QAArD,EACAH,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA8B1B,oBAAoB,CAAC6B,MAAnD,EACAJ,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA4B1B,oBAAoB,CAAC8B,IAAjD,EACAL,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAsC1B,oBAAoB,CAAC+B,cAA3D,EACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACA,CARD,IASI,CACHxC,eAAe,gCAAKD,YAAL,MACdH,IAAI,CAAC,CAACU,oBAAoB,CAACwB,KADb,CAEdjC,OAAO,CAACS,oBAAoB,CAACT,OAFf,CAGdC,IAAI,CAACQ,oBAAoB,CAACwB,KAArB,CAA6B,SAA7B,CAAyC,QAHhC,GAAf,CAKA5B,YAAY,CAAC,KAAD,CAAZ,CACA,CACD,CACD,CApBQ,CAoBP,CAACI,oBAAD,CApBO,CAAT,CAsBG,mBACI,YAAK,SAAS,CAAC,oCAAf,uBAEL,aAAK,SAAS,CAAC,yFAAf,CAAyG,EAAE,CAAC,UAA5G,wBAEC,YAAK,SAAS,CAAC,mHAAf,uBAEC,aAAK,SAAS,CAAC,2DAAf,wBAEC,aAAK,SAAS,CAAC,+DAAf,wBACC,UAAG,IAAI,CAAC,GAAR,CAAY,SAAS,CAAC,mBAAtB,uBACC,YAAK,GAAG,CAAC,sCAAT,CAAgD,SAAS,CAAC,YAA1D,CAAuE,GAAG,CAAC,EAA3E,EADD,EADD,cAKC,aAAK,SAAS,CAAC,yBAAf,wBACC,aAAK,SAAS,CAAC,4BAAf,wBACC,WAAI,SAAS,CAAC,kBAAd,qBADD,cAEC,UAAG,SAAS,CAAC,6BAAb,UAA4CQ,OAAO,CAAG,gCAAH,CAAsC,kCAAzF,EAFD,GADD,cAKE,KAAC,WAAD,EAAa,IAAI,CAAEf,YAAY,CAACH,IAAhC,CAAsC,IAAI,CAAEG,YAAY,CAACD,IAAzD,CAA+D,OAAO,CAAEC,YAAY,CAACF,OAArF,EALF,cAMC,cAAM,SAAS,CAAC,MAAhB,CAAuB,UAAU,CAAC,YAAlC,CAA+C,QAAQ,CAAE,kBAAC4C,CAAD,CAAO,CAC/DA,CAAC,CAACC,cAAF,GACA,GAAG5B,OAAH,CAAW,CACVO,QAAQ,GACR,CAFD,IAGI,CACHH,UAAU,GACV,CACD,CARD,WASE,CAACJ,OAAD,cAAW,MAAC,KAAD,CAAO,QAAP,6BAAiB,aAAK,SAAS,CAAC,qBAAf,wBAC5B,cAAO,SAAS,CAAC,uDAAjB,CAAyE,IAAI,CAAC,OAA9E,CAAsF,WAAW,CAAC,UAAlG,CAA6G,IAAI,CAAC,WAAlH,CAA8H,QAAQ,CAAEE,YAAxI,CAAsJ,YAAY,CAAC,KAAnK,EAD4B,cAE5B,KAAC,cAAD,EAAgB,SAAS,CAAC,aAA1B,UAAyC1B,SAAS,CAACO,OAAV,CAAkB,UAAlB,CAA8BH,WAAW,CAACF,SAA1C,CAAsD,UAAtD,CAAzC,EAF4B,GAAjB,cAIZ,aAAK,SAAS,CAAC,gCAAf,wBACC,cAAO,SAAS,CAAC,uDAAjB,CAAyE,IAAI,CAAC,UAA9E,CAAyF,QAAQ,CAAEwB,YAAnG,CAAiH,WAAW,CAAC,UAA7H,CAAwI,IAAI,CAAC,UAA7I,EADD,cAEC,KAAC,cAAD,EAAgB,SAAS,CAAC,aAA1B,UAAyC1B,SAAS,CAACO,OAAV,CAAkB,UAAlB,CAA8BH,WAAW,CAACD,QAA1C,CAAqD,UAArD,CAAzC,EAFD,GAJY,cASZ,aAAK,SAAS,CAAC,6EAAf,wBACC,YAAK,SAAS,CAAC,iBAAf,uBACC,eAAO,SAAS,CAAC,0CAAjB,wBACA,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,UAA5B,EADA,cAEA,eAFA,iBADD,EADD,cAMC,UAAG,IAAI,CAAC,GAAR,CAAY,EAAE,CAAC,iBAAf,CAAiC,SAAS,CAAC,+BAA3C,+BAND,GATY,OAAX,cAgB0B,aAAK,SAAS,CAAC,gCAAf,wBAC1B,cAAO,SAAS,CAAC,uDAAjB,CAAyE,IAAI,CAAC,UAA9E,CAAyF,QAAQ,CAAEiB,SAAnG,CAA8G,WAAW,CAAC,KAA1H,CAAiI,IAAI,CAAC,KAAtI,EAD0B,cAE1B,KAAC,cAAD,EAAgB,SAAS,CAAC,aAA1B,UAAyCpB,SAAS,CAACO,OAAV,CAAkB,KAAlB,CAAyBW,GAAzB,CAA+B,sBAA/B,CAAzC,EAF0B,GAzB5B,cA8BC,YAAK,SAAS,CAAC,6EAAf,uBACC,eAAQ,EAAE,CAAC,wBAAX,CAAoC,SAAS,CAAC,uDAA9C,CAAsG,QAAQ,CAAEP,SAAhH,UAA4HA,SAAS,cAAG,UAAG,KAAK,CAAC,wBAAT,EAAH,CAA4Ca,OAAO,CAAG,QAAH,CAAc,SAAtM,EADD,EA9BD,GAND,GALD,GAFD,cAmDC,YAAK,SAAS,CAAC,uDAAf,uBACC,YAAK,SAAS,CAAC,uDAAf,wDADD,EAnDD,GAFD,EAFD,cAgEC,YAAK,SAAS,CAAC,8EAAf,CAA8F,KAAK,CAAE,CAAC6B,eAAe,eAAQlE,EAAR,KAAhB,CAArG,uBAEC,YAAK,SAAS,CAAC,yCAAf,uBACC,YAAK,SAAS,CAAC,2CAAf,uBACC,WAAI,SAAS,CAAC,4CAAd,uCADD,EADD,EAFD,EAhED,GAFK,EADJ,CAmFH,CA7KD,CAiLA,cAAgBU,CAAAA,KAAhB","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport bg from '../../assets/image/bg-5.jpg';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport useForceUpdate from 'use-force-update';\r\nimport { FormHelperText } from '@material-ui/core';\r\nimport { connect, useDispatch, useSelector } from 'react-redux';\r\nimport { checkAuthCred, checkAuthOTP } from '../../_redux/actions/auth.action';\r\nimport GlobalAlert from '../../components/GlobalAlert';\r\n\r\nconst Login = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst forceUpdate = useForceUpdate();\r\n\tconst [validator , setValidator] = useState(new SimpleReactValidator())\r\n\tconst [userDetails , setUserDetails] = useState({\r\n\t\tuser_name:'',\r\n\t\tpassword:''\r\n\t});\r\n\r\n\tconst [messageAlert , setMessageAlert] = useState({\r\n\t\tshow:false,\r\n\t\tmessage:\"\",\r\n\t\ttype:\"\"\r\n\t});\r\n\r\n\tconst [isLoading , setIsLoading] = useState(false);\r\n\r\n\tconst checkAuthCredResponse = useSelector((state) => state.auth);\r\n\tconst checkAuthOtpResponse = useSelector((state) => state.auth.getOtpResponse);\r\n\r\n\tconst [otp , setOtp] = useState('');\r\n\r\n\tconst handleOtp = (event) => {\t\r\n\t\tsetOtp(event.target.value);\r\n\t}\r\n\r\n\tconst [showOtp , setShowOtp] = useState(false);\r\n\r\n\tconst handleChange = (event) => {\r\n\t\tsetUserDetails({...userDetails, \r\n\t\t\t[event.target.name]:event.target.value\r\n\t\t});\r\n\t}\r\n\r\n\tconst checkLogin = () => {\r\n\t\tif(validator.fieldValid('Username') && validator.fieldValid('Password')){\r\n\t\t\tdispatch(checkAuthCred(userDetails))\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvalidator.showMessages();\r\n\t\t\tforceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tconst checkOTP = () => {\r\n\t\tif(validator.fieldValid('OTP')){\r\n\t\t\tvar login = `grant_type=password&username=${userDetails.user_name}&password=${otp}`;\r\n\t\t\tdispatch(checkAuthOTP(login));\r\n\t\t\tsetIsLoading(true);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvalidator.showMessages();\r\n\t\t\tforceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(checkAuthCredResponse){\r\n\t\t\tsetIsLoading(checkAuthCredResponse.loadingStatus);\r\n\t\t\tsetMessageAlert({...messageAlert,\r\n\t\t\t\tshow:checkAuthCredResponse.responseMessage !== \"\",\r\n\t\t    \tmessage:checkAuthCredResponse.responseMessage,\r\n\t\t\t\ttype:checkAuthCredResponse.isValidCred ? \"success\" : \"danger\"\r\n\t\t\t});\r\n\t\t\tsetShowOtp(checkAuthCredResponse.isValidCred);\r\n\t\t}\r\n\t},[checkAuthCredResponse]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif(!(Object.keys(checkAuthOtpResponse).length === 0 && checkAuthOtpResponse.constructor === Object)){\r\n\t\t\tif(checkAuthOtpResponse.valid){\r\n\t\t\t\tlocalStorage.setItem(\"token\",checkAuthOtpResponse.access_token);\r\n\t\t\t\tlocalStorage.setItem(\"login\",checkAuthOtpResponse.valid);\r\n\t\t\t\tlocalStorage.setItem(\"userName\",checkAuthOtpResponse.userName);\r\n\t\t\t\tlocalStorage.setItem(\"userId\",checkAuthOtpResponse.userId);\r\n\t\t\t\tlocalStorage.setItem(\"code\",checkAuthOtpResponse.code);\r\n\t\t\t\tlocalStorage.setItem(\"encrypt_userId\",checkAuthOtpResponse.encrypt_userId);\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tsetMessageAlert({...messageAlert,\r\n\t\t\t\t\tshow:!checkAuthOtpResponse.valid,\r\n\t\t\t\t\tmessage:checkAuthOtpResponse.message,\r\n\t\t\t\t\ttype:checkAuthOtpResponse.valid ? \"success\" : \"danger\"\r\n\t\t\t\t});\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t}\r\n\t\t}\r\n\t},[checkAuthOtpResponse])\r\n\r\n    return(\r\n        <div className=\"d-flex flex-column flex-root h-100\">\r\n\t\t \r\n\t\t\t<div className=\"login login-2 login-signin-on d-flex flex-column flex-lg-row flex-column-fluid bg-white\" id=\"kt_login\">\r\n\t\t\t\t \r\n\t\t\t\t<div className=\"login-aside order-2 order-lg-1 d-flex flex-column-fluid flex-lg-row-auto bgi-size-cover bgi-no-repeat p-7 p-lg-10\">\r\n\t\t\t\t\t \r\n\t\t\t\t\t<div className=\"d-flex flex-row-fluid flex-column justify-content-between\">\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t<div className=\"d-flex flex-column-fluid flex-column flex-center mt-5 mt-lg-0\">\r\n\t\t\t\t\t\t\t<a href=\"#\" className=\"mb-15 text-center\">\r\n\t\t\t\t\t\t\t\t<img src=\"assets/media/logos/logo-letter-1.png\" className=\"max-h-75px\" alt=\"\" />\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t<div className=\"login-form login-signin\">\r\n\t\t\t\t\t\t\t\t<div className=\"text-center mb-10 mb-lg-20\">\r\n\t\t\t\t\t\t\t\t\t<h2 className=\"font-weight-bold\">Sign In</h2>\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted font-weight-bold\">{showOtp ? \"OTP sent on email and whatsapp\" : \"Enter your username and password\"}</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t \t<GlobalAlert show={messageAlert.show} type={messageAlert.type} message={messageAlert.message} />\r\n\t\t\t\t\t\t\t\t<form className=\"form\" noValidate=\"novalidate\" onSubmit={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tif(showOtp){\r\n\t\t\t\t\t\t\t\t\t\tcheckOTP();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\tcheckLogin();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{!showOtp ? <React.Fragment> <div className=\"form-group py-3 m-0\">\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"form-control h-auto border-0 px-0 placeholder-dark-75\" type=\"Email\" placeholder=\"Username\" name=\"user_name\" onChange={handleChange} autoComplete=\"off\" />\r\n\t\t\t\t\t\t\t\t\t\t<FormHelperText className=\"text-danger\">{validator.message('Username', userDetails.user_name , 'required')}</FormHelperText>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group py-3 border-top m-0\">\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"form-control h-auto border-0 px-0 placeholder-dark-75\" type=\"Password\" onChange={handleChange} placeholder=\"Password\" name=\"password\" />\r\n\t\t\t\t\t\t\t\t\t\t<FormHelperText className=\"text-danger\">{validator.message('Password', userDetails.password , 'required')}</FormHelperText>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group d-flex flex-wrap justify-content-between align-items-center mt-3\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"checkbox-inline\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"checkbox checkbox-outline m-0 text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"remember\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<span></span>Remember me</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<a href=\"#\" id=\"kt_login_forgot\" className=\"text-muted text-hover-primary\">Forgot Password ?</a>\r\n\t\t\t\t\t\t\t\t\t</div> </React.Fragment> : <div className=\"form-group py-3 border-top m-0\">\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"form-control h-auto border-0 px-0 placeholder-dark-75\" type=\"Password\" onChange={handleOtp} placeholder=\"OTP\"  name=\"otp\" />\r\n\t\t\t\t\t\t\t\t\t\t<FormHelperText className=\"text-danger\">{validator.message('OTP', otp , 'required|min:4|max:4')}</FormHelperText>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group d-flex flex-wrap justify-content-between align-items-center mt-2\">\r\n\t\t\t\t\t\t\t\t\t\t<button id=\"kt_login_signin_submit\" className=\"btn btn-primary font-weight-bold w-100 px-9 py-4 my-3\" disabled={isLoading}>{isLoading ? <i class=\"fas fa-spinner fa-spin\"></i> : showOtp ? \"Submit\" : \"Sign In\"}</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t<div className=\"d-flex flex-column-auto justify-content-between mt-15\">\r\n\t\t\t\t\t\t\t<div className=\"text-dark-50 font-weight-bold order-2 order-sm-1 my-2\">Developed and maintained by Rohin Infotech</div>\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t \r\n\t\t\t\t</div>\r\n\t\t\t\t \r\n\t\t\t\t<div className=\"order-1 order-lg-2 flex-column-auto flex-lg-row-fluid d-flex flex-column p-7\" style={{backgroundImage:`url(${bg})`}}>\r\n\t\t\t\t\t \r\n\t\t\t\t\t<div className=\"d-flex flex-column-fluid flex-lg-center\">\r\n\t\t\t\t\t\t<div className=\"d-flex flex-column justify-content-center\">\r\n\t\t\t\t\t\t\t<h1 className=\"display-2 font-weight-bold my-7 text-white\">ΔIAΓNO∑TIX</h1>\r\n\t\t\t\t\t\t\t{/* <p className=\"font-weight-bold font-size-lg text-white opacity-80\">The ultimate Bootstrap, Angular 8, React &amp; VueJS admin theme\r\n\t\t\t\t\t\t\t<br />framework for next generation web apps.</p> */}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t \r\n\t\t\t\t</div>\r\n\t\t\t\t \r\n\t\t\t</div>\r\n\t\t\t \r\n\t\t</div>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport  default Login;"]},"metadata":{},"sourceType":"module"}
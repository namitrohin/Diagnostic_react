{"ast":null,"code":"import _regeneratorRuntime from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import{Button}from\"@material-ui/core\";import moment from\"moment\";import React,{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import{buttonLoader,showErrorToast,showSuccessToast}from\"../../../components/common\";import{TablePicker}from\"../../../components/table-picker\";import{CommonController}from\"../../../_redux/controller/common.controller\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddTicketCommercial=function AddTicketCommercial(_ref){var changeTab=_ref.changeTab,previewId=_ref.previewId,props=_objectWithoutProperties(_ref,[\"changeTab\",\"previewId\"]);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedTicket=_useState2[0],setSelectedTicket=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPicker=_useState6[0],setShowPicker=_useState6[1];var togglePicker=function togglePicker(){return setShowPicker(!showPicker);};var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),errors=_useState8[0],setErrors=_useState8[1];var _useState9=useState({tran_id:previewId?previewId:\"0\",ticket_id:\"\",date:moment().format(\"DD-MM-yyyy\"),charges:\"\",remarks:\"\",user_id:localStorage.getItem(\"userId\")}),_useState10=_slicedToArray(_useState9,2),formData=_useState10[0],setFormData=_useState10[1];var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var validateForm=function validateForm(){var errors={};if(formData.charges==\"\"){errors.charges=\"Charges required\";}else{delete errors.charges;}if(formData.remarks==\"\"){errors.remarks=\"Remarks required\";}else{delete errors.remarks;}var valid=Object.keys(errors).length===0?true:false;setErrors(errors);return valid;};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);if(!validateForm()){_context.next=5;break;}_context.next=5;return CommonController.commonApiCallFilter(\"TicketCommercial/TicketCommericialInsert\",formData,\"post\").then(function(data){if(data.valid){showSuccessToast(\"Ticket Commercial Successfully\");changeTab(0);}else{showErrorToast(data.msg);}});case 5:setLoading(false);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);showErrorToast(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function onSubmit(){return _ref2.apply(this,arguments);};}();var getTicketById=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return CommonController.commonApiCallFilter(\"TicketCommercial/TicketCommericialPreview\",{tran_id:previewId},\"post\").then(function(data){setSelectedTicket(data);setFormData(_objectSpread(_objectSpread({},formData),{},{charges:data.charges,remarks:data.remarks,ticket_id:data.ticket_id}));});case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);showErrorToast(_context2.t0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function getTicketById(){return _ref3.apply(this,arguments);};}();useEffect(function(){if(previewId){getTicketById();}},[previewId]);var newColumns=[{id:\"id\",label:\"Sr. no\",numeric:false,disablePadding:true},{id:\"date\",label:\"Date\",numeric:false,disablePadding:true},{id:\"ticket_no\",label:\"Ticket No\",numeric:false,disablePadding:true},{id:\"menu\",label:\"Menu\",numeric:false,disablePadding:true},{id:\"transaction\",label:\"Transaction\",numeric:false,disablePadding:true},{id:\"type\",label:\"Type\",numeric:false,disablePadding:true},{id:\"priority\",label:\"Priority\",numeric:false,disablePadding:true},{id:\"details\",label:\"Details\",numeric:false,disablePadding:true},{id:\"generated_by\",label:\"Generated By\",numeric:false,disablePadding:true},{id:\"status\",label:\"Status\",numeric:false,disablePadding:true}];var handlePickTicket=function handlePickTicket(ticket){setFormData(_objectSpread(_objectSpread({},formData),{},{ticket_id:String(ticket.id)}));setSelectedTicket(ticket);setShowPicker(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 text-right\",children:[!showPicker&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:togglePicker,disableElevation:true,color:\"primary\",children:\"Pick Ticket\"}),showPicker&&/*#__PURE__*/_jsx(TablePicker,{selectedItems:selectedTicket,columns:newColumns,type:\"single\",url:\"TicketCommercial/PickTicketInCommercial\",onSubmit:handlePickTicket,onPickerClose:togglePicker})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Ticket Date\"}),/*#__PURE__*/_jsx(\"p\",{children:selectedTicket&&selectedTicket.date!=\"\"?selectedTicket.date:\"N/A\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Ticket No.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",selectedTicket&&selectedTicket.ticket_no!=\"\"?selectedTicket.ticket_no:\"N/A\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Generated By\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",selectedTicket&&selectedTicket.generated_by!=\"\"?selectedTicket.generated_by:\"N/A\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Menu\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",selectedTicket&&selectedTicket.menu!=\"\"?selectedTicket.menu:\"N/A\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Transaction\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",selectedTicket&&selectedTicket.transaction!=\"\"?selectedTicket.transaction:\"N/A\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Type\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",selectedTicket&&selectedTicket.type!=\"\"?selectedTicket.type:\"N/A\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Priority\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",selectedTicket&&selectedTicket.priority!=\"\"?selectedTicket.priority:\"N/A\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Details\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",selectedTicket&&selectedTicket.details!=\"\"?selectedTicket.details:\"N/A\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control w-75\",value:formData.date,disabled:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Charges\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control w-75\",name:\"charges\",value:formData.charges,onChange:handleChange}),errors.charges&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.charges})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Remarks\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",value:formData.remarks,name:\"remarks\",onChange:handleChange,className:\"form-control w-75\"}),errors.remarks&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.remarks})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Approved Date\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",selectedTicket&&selectedTicket.approved_date!=\"\"?selectedTicket.approved_date:\"N/A\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Approved Charges\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",selectedTicket&&selectedTicket.approved_charges!=\"\"?selectedTicket.approved_charges:\"N/A\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Approved Remarks\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",selectedTicket&&selectedTicket.approved_remarks!=\"\"?selectedTicket.approved_remarks:\"N/A\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 text-right\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return changeTab(0);},className:\"mr-2\",disableElevation:true,children:\"Cancel\"}),buttonLoader(loading,\"Submit\",onSubmit,\"primary\")]})]})});};export default AddTicketCommercial;","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/support/ticketCommercial/addCommericial.js"],"names":["Button","moment","React","useEffect","useState","useSelector","buttonLoader","showErrorToast","showSuccessToast","TablePicker","CommonController","AddTicketCommercial","changeTab","previewId","props","selectedTicket","setSelectedTicket","loading","setLoading","showPicker","setShowPicker","togglePicker","errors","setErrors","tran_id","ticket_id","date","format","charges","remarks","user_id","localStorage","getItem","formData","setFormData","handleChange","e","target","name","value","validateForm","valid","Object","keys","length","onSubmit","commonApiCallFilter","then","data","msg","getTicketById","newColumns","id","label","numeric","disablePadding","handlePickTicket","ticket","String","ticket_no","generated_by","menu","transaction","type","priority","details","approved_date","approved_charges","approved_remarks"],"mappings":"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","sourcesContent":["import { Button } from \"@material-ui/core\";\nimport moment from \"moment\";\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  buttonLoader,\n  showErrorToast,\n  showSuccessToast,\n} from \"../../../components/common\";\nimport { TablePicker } from \"../../../components/table-picker\";\nimport { CommonController } from \"../../../_redux/controller/common.controller\";\n\nconst AddTicketCommercial = ({ changeTab, previewId, ...props }) => {\n  const [selectedTicket, setSelectedTicket] = useState(null);\n\n  const [loading, setLoading] = useState(false);\n\n  const [showPicker, setShowPicker] = useState(false);\n\n  const togglePicker = () => setShowPicker(!showPicker);\n\n  const [errors, setErrors] = useState({});\n\n  const [formData, setFormData] = useState({\n    tran_id: previewId ? previewId : \"0\",\n    ticket_id: \"\",\n    date: moment().format(\"DD-MM-yyyy\"),\n    charges: \"\",\n    remarks: \"\",\n    user_id: localStorage.getItem(\"userId\"),\n  });\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const validateForm = () => {\n    let errors = {};\n    if (formData.charges == \"\") {\n      errors.charges = \"Charges required\";\n    } else {\n      delete errors.charges;\n    }\n\n    if (formData.remarks == \"\") {\n      errors.remarks = \"Remarks required\";\n    } else {\n      delete errors.remarks;\n    }\n\n    const valid = Object.keys(errors).length === 0 ? true : false;\n    setErrors(errors);\n    return valid;\n  };\n\n  const onSubmit = async () => {\n    try {\n      setLoading(true);\n      if (validateForm()) {\n        await CommonController.commonApiCallFilter(\n          \"TicketCommercial/TicketCommericialInsert\",\n          formData,\n          \"post\"\n        ).then((data) => {\n          if (data.valid) {\n            showSuccessToast(\"Ticket Commercial Successfully\");\n            changeTab(0);\n          } else {\n            showErrorToast(data.msg);\n          }\n        });\n      }\n      setLoading(false);\n    } catch (err) {\n      showErrorToast(err);\n    }\n  };\n\n  const getTicketById = async () => {\n    try {\n      await CommonController.commonApiCallFilter(\n        \"TicketCommercial/TicketCommericialPreview\",\n        { tran_id: previewId },\n        \"post\"\n      ).then((data) => {\n        setSelectedTicket(data);\n        setFormData({\n          ...formData,\n          charges: data.charges,\n          remarks: data.remarks,\n          ticket_id: data.ticket_id,\n        });\n      });\n    } catch (err) {\n      showErrorToast(err);\n    }\n  };\n\n  useEffect(() => {\n    if (previewId) {\n      getTicketById();\n    }\n  }, [previewId]);\n\n  const newColumns = [\n    {\n      id: \"id\",\n      label: \"Sr. no\",\n      numeric: false,\n      disablePadding: true,\n    },\n    {\n      id: \"date\",\n      label: \"Date\",\n      numeric: false,\n      disablePadding: true,\n    },\n    {\n      id: \"ticket_no\",\n      label: \"Ticket No\",\n      numeric: false,\n      disablePadding: true,\n    },\n    {\n      id: \"menu\",\n      label: \"Menu\",\n      numeric: false,\n      disablePadding: true,\n    },\n    {\n      id: \"transaction\",\n      label: \"Transaction\",\n      numeric: false,\n      disablePadding: true,\n    },\n    {\n      id: \"type\",\n      label: \"Type\",\n      numeric: false,\n      disablePadding: true,\n    },\n    {\n      id: \"priority\",\n      label: \"Priority\",\n      numeric: false,\n      disablePadding: true,\n    },\n    {\n      id: \"details\",\n      label: \"Details\",\n      numeric: false,\n      disablePadding: true,\n    },\n    {\n      id: \"generated_by\",\n      label: \"Generated By\",\n      numeric: false,\n      disablePadding: true,\n    },\n    {\n      id: \"status\",\n      label: \"Status\",\n      numeric: false,\n      disablePadding: true,\n    },\n  ];\n\n  const handlePickTicket = (ticket) => {\n    setFormData({ ...formData, ticket_id: String(ticket.id) });\n    setSelectedTicket(ticket);\n    setShowPicker(false);\n  };\n\n  return (\n    <div className=\"container-fluid mt-5\">\n      <div className=\"row\">\n        <div className=\"col-md-12 text-right\">\n          {!showPicker && (\n            <Button\n              variant=\"contained\"\n              onClick={togglePicker}\n              disableElevation\n              color=\"primary\"\n            >\n              Pick Ticket\n            </Button>\n          )}\n          {showPicker && (\n            <TablePicker\n              selectedItems={selectedTicket}\n              columns={newColumns}\n              type=\"single\"\n              url={\"TicketCommercial/PickTicketInCommercial\"}\n              onSubmit={handlePickTicket}\n              onPickerClose={togglePicker}\n            />\n          )}\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Ticket Date</label>\n            <p>\n              {selectedTicket && selectedTicket.date != \"\"\n                ? selectedTicket.date\n                : \"N/A\"}\n            </p>\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Ticket No.</label>\n            <p>\n              {\" \"}\n              {selectedTicket && selectedTicket.ticket_no != \"\"\n                ? selectedTicket.ticket_no\n                : \"N/A\"}\n            </p>\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Generated By</label>\n            <p>\n              {\" \"}\n              {selectedTicket && selectedTicket.generated_by != \"\"\n                ? selectedTicket.generated_by\n                : \"N/A\"}\n            </p>\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Menu</label>\n            <p>\n              {\" \"}\n              {selectedTicket && selectedTicket.menu != \"\"\n                ? selectedTicket.menu\n                : \"N/A\"}\n            </p>\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Transaction</label>\n            <p>\n              {\" \"}\n              {selectedTicket && selectedTicket.transaction != \"\"\n                ? selectedTicket.transaction\n                : \"N/A\"}\n            </p>\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Type</label>\n            <p>\n              {\" \"}\n              {selectedTicket && selectedTicket.type != \"\"\n                ? selectedTicket.type\n                : \"N/A\"}\n            </p>\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Priority</label>\n            <p>\n              {\" \"}\n              {selectedTicket && selectedTicket.priority != \"\"\n                ? selectedTicket.priority\n                : \"N/A\"}\n            </p>\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Details</label>\n            <p>\n              {\" \"}\n              {selectedTicket && selectedTicket.details != \"\"\n                ? selectedTicket.details\n                : \"N/A\"}\n            </p>\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Date</label>\n            <input\n              type=\"text\"\n              className=\"form-control w-75\"\n              value={formData.date}\n              disabled\n            />\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Charges</label>\n            <input\n              type=\"text\"\n              className=\"form-control w-75\"\n              name=\"charges\"\n              value={formData.charges}\n              onChange={handleChange}\n            />\n            {errors.charges && <p className=\"text-danger\">{errors.charges}</p>}\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Remarks</label>\n            <textarea\n              type=\"text\"\n              value={formData.remarks}\n              name=\"remarks\"\n              onChange={handleChange}\n              className=\"form-control w-75\"\n            ></textarea>\n            {errors.remarks && <p className=\"text-danger\">{errors.remarks}</p>}\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Approved Date</label>\n            <p>\n              {\" \"}\n              {selectedTicket && selectedTicket.approved_date != \"\"\n                ? selectedTicket.approved_date\n                : \"N/A\"}\n            </p>\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Approved Charges</label>\n            <p>\n              {\" \"}\n              {selectedTicket && selectedTicket.approved_charges != \"\"\n                ? selectedTicket.approved_charges\n                : \"N/A\"}\n            </p>\n          </div>\n        </div>\n        <div className=\"col-md-3\">\n          <div className=\"form-group\">\n            <label className=\"font-weight-bold\">Approved Remarks</label>\n            <p>\n              {\" \"}\n              {selectedTicket && selectedTicket.approved_remarks != \"\"\n                ? selectedTicket.approved_remarks\n                : \"N/A\"}\n            </p>\n          </div>\n        </div>\n        <div className=\"col-md-12 text-right\">\n          <Button\n            variant=\"contained\"\n            onClick={() => changeTab(0)}\n            className=\"mr-2\"\n            disableElevation\n          >\n            Cancel\n          </Button>\n          {buttonLoader(loading, \"Submit\", onSubmit, \"primary\")}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AddTicketCommercial;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,TextField}from\"@material-ui/core\";import React,{useState}from\"react\";import{showErrorToast,showSuccessToast}from\"../../components/common\";import{CommonController}from\"../../_redux/controller/common.controller\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChangePassword=function ChangePassword(){var _useState=useState({oldpass:\"\",newpass:\"\",confpass:\"\",user_id:localStorage.getItem(\"userId\"),errors:{}}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var handleChange=function handleChange(event){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},event.target.name,event.target.value)));};var validateForm=function validateForm(){var errors=_objectSpread({},formData.errors);if(formData.oldpass==\"\"){errors.oldpass=\"Please enter old password\";}else{delete errors.oldpass;}if(formData.newpass==\"\"){errors.newpass=\"Please enter new password\";}else{delete errors.newpass;}if(formData.confpass==\"\"){errors.confpass=\"Please enter confirm password\";}else{delete errors.confpass;}console.log(errors);setFormData(_objectSpread(_objectSpread({},formData),{},{errors:errors}));return Object.keys(errors).length!==0;};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);if(validateForm()){_context.next=5;break;}_context.next=5;return CommonController.commonApiCallFilter(\"Profile/UpdateEmployeePassword\",formData,\"post\").then(function(data){if(data.valid){showSuccessToast(\"Password changed successfully \");}else{showErrorToast(data.msg);}});case 5:setLoading(false);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);showErrorToast(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function onSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"card shadow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",fullWidth:true,size:\"small\",value:formData.oldpass,name:\"oldpass\",type:\"password\",label:\"Old Password\",onChange:handleChange}),formData.errors&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-danger\",children:formData.errors.oldpass})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",fullWidth:true,size:\"small\",name:\"newpass\",type:\"password\",value:formData.newpass,label:\"New Password\",onChange:handleChange}),formData.errors&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-danger\",children:formData.errors.newpass})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",fullWidth:true,size:\"small\",name:\"confpass\",value:formData.confpass,label:\"Conf. Password\",onChange:handleChange}),formData.errors&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-danger\",children:formData.errors.confpass})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12 mt-5\",children:/*#__PURE__*/_jsx(Button,{disable:loading,variant:\"contained\",onClick:onSubmit,disableElevation:true,color:\"primary\",children:loading?\"Processing...\":\"Update Password\"})})]})})});};export default ChangePassword;","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/Profile/changePassword.js"],"names":["Button","TextField","React","useState","showErrorToast","showSuccessToast","CommonController","ChangePassword","oldpass","newpass","confpass","user_id","localStorage","getItem","errors","formData","setFormData","loading","setLoading","handleChange","event","target","name","value","validateForm","console","log","Object","keys","length","onSubmit","commonApiCallFilter","then","data","valid","msg"],"mappings":"ysBAAA,OAASA,MAAT,CAAiBC,SAAjB,KAAkC,mBAAlC,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,cAAT,CAAyBC,gBAAzB,KAAiD,yBAAjD,CACA,OAASC,gBAAT,KAAiC,2CAAjC,C,wFAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3B,cAAgCJ,QAAQ,CAAC,CACvCK,OAAO,CAAE,EAD8B,CAEvCC,OAAO,CAAE,EAF8B,CAGvCC,QAAQ,CAAE,EAH6B,CAIvCC,OAAO,CAAEC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAJ8B,CAKvCC,MAAM,CAAE,EAL+B,CAAD,CAAxC,wCAAOC,QAAP,eAAiBC,WAAjB,eAQA,eAA8Bb,QAAQ,CAAC,KAAD,CAAtC,yCAAOc,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC9BJ,WAAW,gCAAMD,QAAN,wBAAiBK,KAAK,CAACC,MAAN,CAAaC,IAA9B,CAAqCF,KAAK,CAACC,MAAN,CAAaE,KAAlD,GAAX,CACD,CAFD,CAIA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAIV,CAAAA,MAAM,kBAAQC,QAAQ,CAACD,MAAjB,CAAV,CACA,GAAIC,QAAQ,CAACP,OAAT,EAAoB,EAAxB,CAA4B,CAC1BM,MAAM,CAACN,OAAP,CAAiB,2BAAjB,CACD,CAFD,IAEO,CACL,MAAOM,CAAAA,MAAM,CAACN,OAAd,CACD,CACD,GAAIO,QAAQ,CAACN,OAAT,EAAoB,EAAxB,CAA4B,CAC1BK,MAAM,CAACL,OAAP,CAAiB,2BAAjB,CACD,CAFD,IAEO,CACL,MAAOK,CAAAA,MAAM,CAACL,OAAd,CACD,CACD,GAAIM,QAAQ,CAACL,QAAT,EAAqB,EAAzB,CAA6B,CAC3BI,MAAM,CAACJ,QAAP,CAAkB,+BAAlB,CACD,CAFD,IAEO,CACL,MAAOI,CAAAA,MAAM,CAACJ,QAAd,CACD,CACDe,OAAO,CAACC,GAAR,CAAYZ,MAAZ,EACAE,WAAW,gCAAMD,QAAN,MAAgBD,MAAM,CAAEA,MAAxB,GAAX,CACA,MAAOa,CAAAA,MAAM,CAACC,IAAP,CAAYd,MAAZ,EAAoBe,MAApB,GAA+B,CAAtC,CACD,CApBD,CAsBA,GAAMC,CAAAA,QAAQ,0FAAG,mJAEbZ,UAAU,CAAC,IAAD,CAAV,CAFa,GAGRM,YAAY,EAHJ,+CAILlB,CAAAA,gBAAgB,CAACyB,mBAAjB,CACJ,gCADI,CAEJhB,QAFI,CAGJ,MAHI,EAIJiB,IAJI,CAIC,SAACC,IAAD,CAAU,CACf,GAAIA,IAAI,CAACC,KAAT,CAAgB,CACd7B,gBAAgB,CAAC,gCAAD,CAAhB,CACD,CAFD,IAEO,CACLD,cAAc,CAAC6B,IAAI,CAACE,GAAN,CAAd,CACD,CACF,CAVK,CAJK,QAgBbjB,UAAU,CAAC,KAAD,CAAV,CAhBa,+EAkBbd,cAAc,aAAd,CAlBa,oEAAH,kBAAR0B,CAAAA,QAAQ,0CAAd,CAsBA,mBACE,YAAK,SAAS,CAAC,aAAf,uBACE,YAAK,SAAS,CAAC,WAAf,uBACE,aAAK,SAAS,CAAC,KAAf,wBACE,aAAK,SAAS,CAAC,UAAf,wBACE,KAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,SAAS,KAFX,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAEf,QAAQ,CAACP,OAJlB,CAKE,IAAI,CAAC,SALP,CAME,IAAI,CAAC,UANP,CAOE,KAAK,CAAC,cAPR,CAQE,QAAQ,CAAEW,YARZ,EADF,CAWGJ,QAAQ,CAACD,MAAT,eACC,UAAG,SAAS,CAAC,kBAAb,UAAiCC,QAAQ,CAACD,MAAT,CAAgBN,OAAjD,EAZJ,GADF,cAgBE,aAAK,SAAS,CAAC,UAAf,wBACE,KAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,SAAS,KAFX,CAGE,IAAI,CAAC,OAHP,CAIE,IAAI,CAAC,SAJP,CAKE,IAAI,CAAC,UALP,CAME,KAAK,CAAEO,QAAQ,CAACN,OANlB,CAOE,KAAK,CAAC,cAPR,CAQE,QAAQ,CAAEU,YARZ,EADF,CAWGJ,QAAQ,CAACD,MAAT,eACC,UAAG,SAAS,CAAC,kBAAb,UAAiCC,QAAQ,CAACD,MAAT,CAAgBL,OAAjD,EAZJ,GAhBF,cA+BE,aAAK,SAAS,CAAC,UAAf,wBACE,KAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,SAAS,KAFX,CAGE,IAAI,CAAC,OAHP,CAIE,IAAI,CAAC,UAJP,CAKE,KAAK,CAAEM,QAAQ,CAACL,QALlB,CAME,KAAK,CAAC,gBANR,CAOE,QAAQ,CAAES,YAPZ,EADF,CAUGJ,QAAQ,CAACD,MAAT,eACC,UAAG,SAAS,CAAC,kBAAb,UAAiCC,QAAQ,CAACD,MAAT,CAAgBJ,QAAjD,EAXJ,GA/BF,cA6CE,YAAK,SAAS,CAAC,gBAAf,uBACE,KAAC,MAAD,EACE,OAAO,CAAEO,OADX,CAEE,OAAO,CAAC,WAFV,CAGE,OAAO,CAAEa,QAHX,CAIE,gBAAgB,KAJlB,CAKE,KAAK,CAAC,SALR,UAOGb,OAAO,CAAG,eAAH,CAAqB,iBAP/B,EADF,EA7CF,GADF,EADF,EADF,CA+DD,CA1HD,CA4HA,cAAeV,CAAAA,cAAf","sourcesContent":["import { Button, TextField } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { showErrorToast, showSuccessToast } from \"../../components/common\";\nimport { CommonController } from \"../../_redux/controller/common.controller\";\n\nconst ChangePassword = () => {\n  const [formData, setFormData] = useState({\n    oldpass: \"\",\n    newpass: \"\",\n    confpass: \"\",\n    user_id: localStorage.getItem(\"userId\"),\n    errors: {},\n  });\n\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (event) => {\n    setFormData({ ...formData, [event.target.name]: event.target.value });\n  };\n\n  const validateForm = () => {\n    let errors = { ...formData.errors };\n    if (formData.oldpass == \"\") {\n      errors.oldpass = \"Please enter old password\";\n    } else {\n      delete errors.oldpass;\n    }\n    if (formData.newpass == \"\") {\n      errors.newpass = \"Please enter new password\";\n    } else {\n      delete errors.newpass;\n    }\n    if (formData.confpass == \"\") {\n      errors.confpass = \"Please enter confirm password\";\n    } else {\n      delete errors.confpass;\n    }\n    console.log(errors);\n    setFormData({ ...formData, errors: errors });\n    return Object.keys(errors).length !== 0;\n  };\n\n  const onSubmit = async () => {\n    try {\n      setLoading(true);\n      if (!validateForm()) {\n        await CommonController.commonApiCallFilter(\n          \"Profile/UpdateEmployeePassword\",\n          formData,\n          \"post\"\n        ).then((data) => {\n          if (data.valid) {\n            showSuccessToast(\"Password changed successfully \");\n          } else {\n            showErrorToast(data.msg);\n          }\n        });\n      }\n      setLoading(false);\n    } catch (err) {\n      showErrorToast(err);\n    }\n  };\n\n  return (\n    <div className=\"card shadow\">\n      <div className=\"card-body\">\n        <div className=\"row\">\n          <div className=\"col-md-3\">\n            <TextField\n              variant=\"outlined\"\n              fullWidth\n              size=\"small\"\n              value={formData.oldpass}\n              name=\"oldpass\"\n              type=\"password\"\n              label=\"Old Password\"\n              onChange={handleChange}\n            />\n            {formData.errors && (\n              <p className=\"mb-0 text-danger\">{formData.errors.oldpass}</p>\n            )}\n          </div>\n          <div className=\"col-md-3\">\n            <TextField\n              variant=\"outlined\"\n              fullWidth\n              size=\"small\"\n              name=\"newpass\"\n              type=\"password\"\n              value={formData.newpass}\n              label=\"New Password\"\n              onChange={handleChange}\n            />\n            {formData.errors && (\n              <p className=\"mb-0 text-danger\">{formData.errors.newpass}</p>\n            )}\n          </div>\n          <div className=\"col-md-3\">\n            <TextField\n              variant=\"outlined\"\n              fullWidth\n              size=\"small\"\n              name=\"confpass\"\n              value={formData.confpass}\n              label=\"Conf. Password\"\n              onChange={handleChange}\n            />\n            {formData.errors && (\n              <p className=\"mb-0 text-danger\">{formData.errors.confpass}</p>\n            )}\n          </div>\n          <div className=\"col-md-12 mt-5\">\n            <Button\n              disable={loading}\n              variant=\"contained\"\n              onClick={onSubmit}\n              disableElevation\n              color=\"primary\"\n            >\n              {loading ? \"Processing...\" : \"Update Password\"}\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChangePassword;\n"]},"metadata":{},"sourceType":"module"}
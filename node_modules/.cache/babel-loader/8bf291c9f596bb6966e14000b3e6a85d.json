{"ast":null,"code":"import _regeneratorRuntime from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{TextField,Button}from\"@material-ui/core\";import{Autocomplete}from\"@material-ui/lab\";import{DatePicker}from\"@material-ui/pickers\";import SimpleReactValidator from\"simple-react-validator\";import{buttonLoader,showErrorToast,showSuccessToast}from\"../../../../../components/common\";import{CommonController}from\"../../../../../_redux/controller/common.controller\";import{SimpleTable}from\"../../../../../components/basic-table\";import useForceUpdate from\"use-force-update\";import moment from\"moment\";import{useSelector}from\"react-redux\";import{Loader}from\"../../../../../components/loader\";import{selectedLedgerId}from\"../../../../../_redux/actions/masters/all.action\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddOrEditLedger=function AddOrEditLedger(_ref){var onClose=_ref.onClose;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var selectedIdResponse=useSelector(function(state){return state.AllReducersMaster.ledgerId;});var _useState3=useState(new SimpleReactValidator()),_useState4=_slicedToArray(_useState3,2),validator=_useState4[0],setValidator=_useState4[1];var forceUpdate=useForceUpdate();var _useState5=useState({ledger_id:\"0\",ledger_name:\"\",description:\"\",user_id:localStorage.getItem(\"userId\"),user_name:localStorage.getItem(\"userName\")}),_useState6=_slicedToArray(_useState5,2),insertParams=_useState6[0],setInsertParams=_useState6[1];useEffect(function(){if(selectedIdResponse){CommonController.commonApiCallFilter(\"Configuration/ConfigurationCostingLedgerPreview\",{ledger_id:selectedIdResponse}).then(function(data){if(data.ledger_id){setInsertParams(_objectSpread(_objectSpread({},insertParams),{},{ledger_id:data.ledger_id,ledger_name:data.ledger_name,description:data.description}));}else{showErrorToast(\"Something went wrong\");}});}},[selectedIdResponse]);var insertCombo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(validator.allValid()){setLoading(true);CommonController.commonApiCallFilter(\"Configuration/ConfigurationCostingLedgerInsert\",insertParams).then(function(data){if(data.valid){showSuccessToast(\"Successfully Saved\");setLoading(false);onClose();}else{showErrorToast(\"Something went wrong\");}});}else{validator.showMessages();// rerender to show messages for the first time\n// you can use the autoForceUpdate option to do this automatically`\nforceUpdate();}case 1:case\"end\":return _context.stop();}}},_callee);}));return function insertCombo(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mt-5 pt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",fullWidth:true,size:\"small\",label:\"Ledger Name*\",value:insertParams.ledger_name,onChange:function onChange(event){setInsertParams(_objectSpread(_objectSpread({},insertParams),{},{ledger_name:event.target.value}));}}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:validator.message(\"Ledger Name\",insertParams.ledger_name,\"required\")})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",fullWidth:true,size:\"small\",multiline:true,label:\"Description\",value:insertParams.description,onChange:function onChange(event){setInsertParams(_objectSpread(_objectSpread({},insertParams),{},{description:event.target.value}));}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 text-right mt-4\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return onClose();},variant:\"contained\",className:\"mr-2\",color:\"primary\",disableElevation:true,children:\"Cancel\"}),buttonLoader(loading,\"Save\",insertCombo,\"primary\")]})]})});};export default AddOrEditLedger;","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/Master/Configuration/costing/ledger/form.js"],"names":["React","useEffect","useState","TextField","Button","Autocomplete","DatePicker","SimpleReactValidator","buttonLoader","showErrorToast","showSuccessToast","CommonController","SimpleTable","useForceUpdate","moment","useSelector","Loader","selectedLedgerId","AddOrEditLedger","onClose","loading","setLoading","selectedIdResponse","state","AllReducersMaster","ledgerId","validator","setValidator","forceUpdate","ledger_id","ledger_name","description","user_id","localStorage","getItem","user_name","insertParams","setInsertParams","commonApiCallFilter","then","data","insertCombo","allValid","valid","showMessages","event","target","value","message"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { TextField, Button } from \"@material-ui/core\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\nimport { DatePicker } from \"@material-ui/pickers\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\n\r\nimport {\r\n  buttonLoader,\r\n  showErrorToast,\r\n  showSuccessToast,\r\n} from \"../../../../../components/common\";\r\nimport { CommonController } from \"../../../../../_redux/controller/common.controller\";\r\nimport { SimpleTable } from \"../../../../../components/basic-table\";\r\nimport useForceUpdate from \"use-force-update\";\r\nimport moment from \"moment\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Loader } from \"../../../../../components/loader\";\r\nimport { selectedLedgerId } from \"../../../../../_redux/actions/masters/all.action\";\r\n\r\nconst AddOrEditLedger = ({ onClose }) => {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const selectedIdResponse = useSelector(\r\n    (state) => state.AllReducersMaster.ledgerId\r\n  );\r\n\r\n  const [validator, setValidator] = useState(new SimpleReactValidator());\r\n\r\n  const forceUpdate = useForceUpdate();\r\n\r\n  const [insertParams, setInsertParams] = useState({\r\n    ledger_id: \"0\",\r\n    ledger_name: \"\",\r\n    description: \"\",\r\n    user_id: localStorage.getItem(\"userId\"),\r\n    user_name: localStorage.getItem(\"userName\"),\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (selectedIdResponse) {\r\n      CommonController.commonApiCallFilter(\r\n        \"Configuration/ConfigurationCostingLedgerPreview\",\r\n        {\r\n          ledger_id: selectedIdResponse,\r\n        }\r\n      ).then((data) => {\r\n        if (data.ledger_id) {\r\n          setInsertParams({\r\n            ...insertParams,\r\n            ledger_id: data.ledger_id,\r\n            ledger_name: data.ledger_name,\r\n            description: data.description,\r\n          });\r\n        } else {\r\n          showErrorToast(\"Something went wrong\");\r\n        }\r\n      });\r\n    }\r\n  }, [selectedIdResponse]);\r\n\r\n  const insertCombo = async () => {\r\n    if (validator.allValid()) {\r\n      setLoading(true);\r\n      CommonController.commonApiCallFilter(\r\n        \"Configuration/ConfigurationCostingLedgerInsert\",\r\n        insertParams\r\n      ).then((data) => {\r\n        if (data.valid) {\r\n          showSuccessToast(\"Successfully Saved\");\r\n          setLoading(false);\r\n          onClose();\r\n        } else {\r\n          showErrorToast(\"Something went wrong\");\r\n        }\r\n      });\r\n    } else {\r\n      validator.showMessages();\r\n      // rerender to show messages for the first time\r\n      // you can use the autoForceUpdate option to do this automatically`\r\n      forceUpdate();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"container-fluid mt-5 pt-5\">\r\n        {/* {loading && <Loader />} */}\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6\">\r\n            <TextField\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              label=\"Ledger Name*\"\r\n              value={insertParams.ledger_name}\r\n              onChange={(event) => {\r\n                setInsertParams({\r\n                  ...insertParams,\r\n                  ledger_name: event.target.value,\r\n                });\r\n              }}\r\n            />\r\n            <p className=\"text-danger\">\r\n              {validator.message(\r\n                \"Ledger Name\",\r\n                insertParams.ledger_name,\r\n                \"required\"\r\n              )}\r\n            </p>\r\n          </div>\r\n          <div className=\"col-md-6\">\r\n            <TextField\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              multiline\r\n              label=\"Description\"\r\n              value={insertParams.description}\r\n              onChange={(event) => {\r\n                setInsertParams({\r\n                  ...insertParams,\r\n                  description: event.target.value,\r\n                });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"w-100 text-right mt-4\">\r\n          <Button\r\n            onClick={() => onClose()}\r\n            variant=\"contained\"\r\n            className=\"mr-2\"\r\n            color=\"primary\"\r\n            disableElevation\r\n          >\r\n            Cancel\r\n          </Button>\r\n          {buttonLoader(loading, \"Save\", insertCombo, \"primary\")}\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default AddOrEditLedger;\r\n"]},"metadata":{},"sourceType":"module"}
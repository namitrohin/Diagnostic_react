{"ast":null,"code":"var _jsxFileName = \"F:\\\\React code\\\\diagnostic\\\\src\\\\pages\\\\DC\\\\form.js\",\n    _s = $RefreshSig$();\n\nimport { Button, Fab } from \"@material-ui/core\";\nimport { Autocomplete, TextField } from \"@mui/material\";\nimport moment from \"moment\";\nimport React, { useEffect, useState } from \"react\";\nimport { SimpleTable } from \"../../components/basic-table\";\nimport { debounce, showErrorToast, showSuccessToast } from \"../../components/common\";\nimport { TablePicker } from \"../../components/table-picker\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { CommonController } from \"../../_redux/controller/common.controller\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NewDCPackaging = () => {\n  _s();\n\n  const [selectedPackingList, setSelectedPackingList] = useState([]);\n  const [showPackagingList, setShowPackagingList] = useState(false);\n  const [itemListBody, setItemListBody] = useState(null);\n  const [showItemList, setShowItemList] = useState(null);\n  const [companyList, setCompanyList] = useState([]);\n  const [selectedCompany, setSelectedCompany] = useState(null);\n  const [initialValues, setInitialValues] = useState({\n    date: moment().format(\"DD/MM/YYYY\"),\n    entry_no: \"\",\n    remarks: \"\"\n  });\n  const [boxList, setBoxList] = useState([{\n    items: []\n  }]);\n  useEffect(() => {\n    getEntryNo();\n  }, []);\n  useEffect(() => {\n    setItemListBody({\n      dcList: selectedPackingList.map(item => ({\n        id: item.tran_id\n      })),\n      itemList: []\n    });\n  }, [selectedPackingList]);\n  useEffect(() => {\n    if (boxList.length > 1) {\n      let iList = [];\n      boxList.forEach(x => {\n        iList.push.apply(iList, x.items);\n      });\n      setItemListBody({\n        dcList: selectedPackingList.map(item => ({\n          id: item.tran_id\n        })),\n        itemList: iList\n      });\n    }\n  }, [boxList]);\n\n  const togglePackagingList = () => setShowPackagingList(!showPackagingList);\n\n  const toggleItemList = index => setShowItemList(index);\n\n  const handlePackagingList = data => {\n    setSelectedPackingList(data);\n    togglePackagingList();\n  };\n\n  const handleIemList = (data, index) => {\n    let tempBox = [...boxList];\n    tempBox[index].items = data;\n    setBoxList(tempBox);\n    toggleItemList(null);\n  };\n\n  const removeBox = index => {\n    setBoxList(boxList.filter((item, _) => _ !== index));\n  };\n\n  const addBox = () => {\n    setBoxList([...boxList, {\n      items: []\n    }]);\n  };\n\n  const itemListColumn = [{\n    id: \"tran_id\",\n    numeric: false,\n    disablePadding: true,\n    label: \"ID\"\n  }, {\n    id: \"mlfb_no\",\n    numeric: false,\n    disablePadding: true,\n    label: \"MLFB No.\"\n  }, {\n    id: \"dc_no\",\n    numeric: false,\n    disablePadding: true,\n    label: \"DC No.\"\n  }, {\n    id: \"item_name\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Item Name\"\n  }, {\n    id: \"description\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Description\"\n  }, {\n    id: \"qty\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Quantity\"\n  }, {\n    id: \"serial_no\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Serial No.\"\n  }];\n  const packagingListColumn = [{\n    id: \"tran_id\",\n    numeric: false,\n    disablePadding: true,\n    label: \"ID\"\n  }, {\n    id: \"date\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Date\",\n    dateFormat: true\n  }, {\n    id: \"dc_no\",\n    numeric: false,\n    disablePadding: true,\n    label: \"DC No.\"\n  }, {\n    id: \"Company\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Company\"\n  }, {\n    id: \"Contact\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Contact\"\n  }, {\n    id: \"so_no\",\n    numeric: false,\n    disablePadding: true,\n    label: \"SO No.\"\n  }, {\n    id: \"dispatch_through\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Dispatch Through\"\n  }, {\n    id: \"Destination\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Destination\"\n  }, {\n    id: \"datetime\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Datetime\",\n    dateFormat: true\n  }, {\n    id: \"status\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Status\"\n  }, {\n    id: \"comments\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Comments\"\n  }, {\n    id: \"remarks\",\n    numeric: false,\n    disablePadding: true,\n    label: \"Remarks\",\n    flex: 1\n  }, {\n    id: \"di_no\",\n    numeric: false,\n    disablePadding: true,\n    label: \"DI No.\"\n  }];\n\n  const getCompanyList = async search => {\n    try {\n      let response = await CommonController.commonApiCallFilter(\"dc/pickCompany\", {\n        search: search\n      }, \"get\", \"node\");\n\n      if (response.status === 200) {\n        setCompanyList(response.result);\n      } else {\n        showErrorToast(response.message);\n      }\n    } catch (err) {\n      showErrorToast(err);\n    }\n  };\n\n  const deletePickItem = (item, index) => {\n    let tempBoxList = [...boxList];\n    tempBoxList[index].items = tempBoxList[index].items.filter(x => x.tran_id !== item.tran_id);\n    setBoxList(tempBoxList);\n  };\n\n  const getEntryNo = async () => {\n    try {\n      let response = await CommonController.commonApiCallFilter(\"dc/generateDCNo\", {}, \"get\", \"node\");\n\n      if (response.status === 200) {\n        setInitialValues({ ...initialValues,\n          entry_no: response.data\n        });\n      } else {\n        showErrorToast(response.message);\n      }\n    } catch (err) {\n      showErrorToast(err);\n    }\n  };\n\n  const submitDC = async () => {\n    try {\n      if (initialValues.remarks === \"\") {\n        showErrorToast(\"Please enter remarks\");\n      } else if (boxList.filter(x => x.items.length < 1).length > 0) {\n        showErrorToast(\"Please choose items for box\");\n      } else if (selectedPackingList.length < 1) {\n        showErrorToast(\"Please choose dc packaging\");\n      } else {\n        const body = {\n          tran_id: \"0\",\n          date: initialValues.date,\n          entry_no: initialValues.entry_no,\n          company_id: selectedCompany.company_id,\n          remarks: initialValues.remarks,\n          boxList: boxList,\n          user_id: localStorage.getItem(\"userId\")\n        };\n        let response = await CommonController.commonApiCallFilter(\"dc/insertDc\", body, \"post\", \"node\");\n\n        if (response.status === 200) {\n          showSuccessToast(response.message);\n          window.location.reload();\n        } else {\n          showErrorToast(response.message);\n        }\n      }\n    } catch (err) {\n      showErrorToast(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid mt-5 pt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"entry-details d-flex col-md-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mr-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            value: initialValues.date,\n            fullWidth: true,\n            label: \"\",\n            variant: \"outlined\",\n            size: \"small\",\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mr-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Entry No.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(TextField, {\n            value: initialValues.entry_no,\n            fullWidth: true,\n            label: \"\",\n            variant: \"outlined\",\n            size: \"small\",\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Remarks\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Remarks\",\n            fullWidth: true,\n            value: initialValues.remarks,\n            variant: \"outlined\",\n            size: \"small\",\n            name: \"remarks\",\n            onChange: e => setInitialValues({ ...initialValues,\n              remarks: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4  ml-auto \",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Pick Company\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Autocomplete, {\n            id: \"combo-box-demo\",\n            options: companyList,\n            fullWidth: true,\n            size: \"small\" // getOptionLabel={(option) => option.company_name}\n            ,\n            value: selectedCompany,\n            onChange: (e, value) => setSelectedCompany(value),\n            renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n              onInput: e => {\n                debounce(getCompanyList(e.target.value, 200));\n              },\n              label: \"\",\n              variant: \"outlined\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this), !showPackagingList && selectedCompany && /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            className: \"mx-3 w-25\",\n            disableElevation: true,\n            variant: \"contained\",\n            onClick: togglePackagingList,\n            children: \"Pick DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, this), showPackagingList && /*#__PURE__*/_jsxDEV(TablePicker, {\n      selectedItems: selectedPackingList,\n      columns: packagingListColumn,\n      url: \"dc/pickDC\",\n      isNode: \"node\",\n      apiBody: {\n        company_id: selectedCompany === null || selectedCompany === void 0 ? void 0 : selectedCompany.company_id\n      },\n      apiType: \"post\",\n      onPickerClose: togglePackagingList,\n      onSubmit: handlePackagingList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 9\n    }, this), selectedPackingList.length > 0 && /*#__PURE__*/_jsxDEV(SimpleTable, {\n      columns: packagingListColumn,\n      rows: selectedPackingList // onDelete={handleAddedCustomer}\n\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 9\n    }, this), itemListBody && itemListBody.dcList.length > 0 && boxList.map((box, index) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"box-list mt-5 pt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"box-header\",\n            children: [\"Box no. \", index + 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" ml-auto\",\n            children: [showItemList !== index && /*#__PURE__*/_jsxDEV(Button, {\n              color: \"primary\",\n              className: \"mr-2\",\n              disableElevation: true,\n              variant: \"contained\",\n              onClick: () => toggleItemList(index),\n              children: \"Pick Item\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"primary\",\n              className: \"mr-2 ml-auto\",\n              disableElevation: true,\n              variant: \"contained\",\n              onClick: () => removeBox(index),\n              children: \"Remove Box\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 15\n        }, this), showItemList === index && /*#__PURE__*/_jsxDEV(TablePicker, {\n          selectedItems: box.items,\n          columns: itemListColumn,\n          url: \"dc/pickDCItem\",\n          isNode: \"node\",\n          apiBody: itemListBody,\n          apiType: \"post\",\n          onPickerClose: () => toggleItemList(null),\n          onSubmit: data => handleIemList(data, index)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 17\n        }, this), box.items.length > 0 && showItemList !== index && /*#__PURE__*/_jsxDEV(SimpleTable, {\n          columns: itemListColumn,\n          rows: box.items,\n          onDelete: item => deletePickItem(item, index)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 17\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 13\n      }, this);\n    }), selectedPackingList.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"float-action-btn\",\n      children: /*#__PURE__*/_jsxDEV(Fab, {\n        variant: \"extended\",\n        onClick: addBox,\n        size: \"medium\",\n        color: \"primary\",\n        \"aria-label\": \"add\",\n        children: [/*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this), \"Add Box\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 mt-3 text-right\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        color: \"primary\",\n        className: \"mr-2\",\n        disableElevation: true,\n        variant: \"contained\",\n        onClick: submitDC,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        color: \"primary\",\n        disableElevation: true,\n        variant: \"contained\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 301,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NewDCPackaging, \"WdpturHe/w0uff3Vd312ggyIY18=\");\n\n_c = NewDCPackaging;\nexport default NewDCPackaging;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewDCPackaging\");","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/DC/form.js"],"names":["Button","Fab","Autocomplete","TextField","moment","React","useEffect","useState","SimpleTable","debounce","showErrorToast","showSuccessToast","TablePicker","AddIcon","CommonController","NewDCPackaging","selectedPackingList","setSelectedPackingList","showPackagingList","setShowPackagingList","itemListBody","setItemListBody","showItemList","setShowItemList","companyList","setCompanyList","selectedCompany","setSelectedCompany","initialValues","setInitialValues","date","format","entry_no","remarks","boxList","setBoxList","items","getEntryNo","dcList","map","item","id","tran_id","itemList","length","iList","forEach","x","push","apply","togglePackagingList","toggleItemList","index","handlePackagingList","data","handleIemList","tempBox","removeBox","filter","_","addBox","itemListColumn","numeric","disablePadding","label","packagingListColumn","dateFormat","flex","getCompanyList","search","response","commonApiCallFilter","status","result","message","err","deletePickItem","tempBoxList","submitDC","body","company_id","user_id","localStorage","getItem","window","location","reload","e","target","value","params","box"],"mappings":"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","sourcesContent":["import { Button, Fab } from \"@material-ui/core\";\nimport { Autocomplete, TextField } from \"@mui/material\";\n\nimport moment from \"moment\";\nimport React, { useEffect, useState } from \"react\";\nimport { SimpleTable } from \"../../components/basic-table\";\nimport {\n  debounce,\n  showErrorToast,\n  showSuccessToast,\n} from \"../../components/common\";\nimport { TablePicker } from \"../../components/table-picker\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { CommonController } from \"../../_redux/controller/common.controller\";\n\nconst NewDCPackaging = () => {\n  const [selectedPackingList, setSelectedPackingList] = useState([]);\n  const [showPackagingList, setShowPackagingList] = useState(false);\n  const [itemListBody, setItemListBody] = useState(null);\n  const [showItemList, setShowItemList] = useState(null);\n  const [companyList, setCompanyList] = useState([]);\n  const [selectedCompany, setSelectedCompany] = useState(null);\n\n  const [initialValues, setInitialValues] = useState({\n    date: moment().format(\"DD/MM/YYYY\"),\n    entry_no: \"\",\n    remarks: \"\",\n  });\n  const [boxList, setBoxList] = useState([\n    {\n      items: [],\n    },\n  ]);\n\n  useEffect(() => {\n    getEntryNo();\n  }, []);\n  useEffect(() => {\n    setItemListBody({\n      dcList: selectedPackingList.map((item) => ({ id: item.tran_id })),\n      itemList: [],\n    });\n  }, [selectedPackingList]);\n\n  useEffect(() => {\n    if (boxList.length > 1) {\n      let iList = [];\n      boxList.forEach((x) => {\n        iList.push.apply(iList, x.items);\n      });\n\n      setItemListBody({\n        dcList: selectedPackingList.map((item) => ({ id: item.tran_id })),\n        itemList: iList,\n      });\n    }\n  }, [boxList]);\n\n  const togglePackagingList = () => setShowPackagingList(!showPackagingList);\n  const toggleItemList = (index) => setShowItemList(index);\n\n  const handlePackagingList = (data) => {\n    setSelectedPackingList(data);\n    togglePackagingList();\n  };\n\n  const handleIemList = (data, index) => {\n    let tempBox = [...boxList];\n    tempBox[index].items = data;\n    setBoxList(tempBox);\n    toggleItemList(null);\n  };\n\n  const removeBox = (index) => {\n    setBoxList(boxList.filter((item, _) => _ !== index));\n  };\n\n  const addBox = () => {\n    setBoxList([\n      ...boxList,\n      {\n        items: [],\n      },\n    ]);\n  };\n\n  const itemListColumn = [\n    {\n      id: \"tran_id\",\n      numeric: false,\n      disablePadding: true,\n      label: \"ID\",\n    },\n    {\n      id: \"mlfb_no\",\n      numeric: false,\n      disablePadding: true,\n      label: \"MLFB No.\",\n    },\n    {\n      id: \"dc_no\",\n      numeric: false,\n      disablePadding: true,\n      label: \"DC No.\",\n    },\n    {\n      id: \"item_name\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Item Name\",\n    },\n    {\n      id: \"description\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Description\",\n    },\n\n    {\n      id: \"qty\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Quantity\",\n    },\n    {\n      id: \"serial_no\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Serial No.\",\n    },\n  ];\n\n  const packagingListColumn = [\n    {\n      id: \"tran_id\",\n      numeric: false,\n      disablePadding: true,\n      label: \"ID\",\n    },\n    {\n      id: \"date\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Date\",\n      dateFormat: true,\n    },\n    {\n      id: \"dc_no\",\n      numeric: false,\n      disablePadding: true,\n      label: \"DC No.\",\n    },\n    {\n      id: \"Company\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Company\",\n    },\n    {\n      id: \"Contact\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Contact\",\n    },\n    {\n      id: \"so_no\",\n      numeric: false,\n      disablePadding: true,\n      label: \"SO No.\",\n    },\n    {\n      id: \"dispatch_through\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Dispatch Through\",\n    },\n    {\n      id: \"Destination\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Destination\",\n    },\n    {\n      id: \"datetime\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Datetime\",\n      dateFormat: true,\n    },\n    {\n      id: \"status\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Status\",\n    },\n    {\n      id: \"comments\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Comments\",\n    },\n    {\n      id: \"remarks\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Remarks\",\n      flex: 1,\n    },\n    {\n      id: \"di_no\",\n      numeric: false,\n      disablePadding: true,\n      label: \"DI No.\",\n    },\n  ];\n\n  const getCompanyList = async (search) => {\n    try {\n      let response = await CommonController.commonApiCallFilter(\n        \"dc/pickCompany\",\n        { search: search },\n        \"get\",\n        \"node\"\n      );\n\n      if (response.status === 200) {\n        setCompanyList(response.result);\n      } else {\n        showErrorToast(response.message);\n      }\n    } catch (err) {\n      showErrorToast(err);\n    }\n  };\n\n  const deletePickItem = (item, index) => {\n    let tempBoxList = [...boxList];\n    tempBoxList[index].items = tempBoxList[index].items.filter(\n      (x) => x.tran_id !== item.tran_id\n    );\n\n    setBoxList(tempBoxList);\n  };\n\n  const getEntryNo = async () => {\n    try {\n      let response = await CommonController.commonApiCallFilter(\n        \"dc/generateDCNo\",\n        {},\n        \"get\",\n        \"node\"\n      );\n\n      if (response.status === 200) {\n        setInitialValues({ ...initialValues, entry_no: response.data });\n      } else {\n        showErrorToast(response.message);\n      }\n    } catch (err) {\n      showErrorToast(err);\n    }\n  };\n\n  const submitDC = async () => {\n    try {\n      if (initialValues.remarks === \"\") {\n        showErrorToast(\"Please enter remarks\");\n      } else if (boxList.filter((x) => x.items.length < 1).length > 0) {\n        showErrorToast(\"Please choose items for box\");\n      } else if (selectedPackingList.length < 1) {\n        showErrorToast(\"Please choose dc packaging\");\n      } else {\n        const body = {\n          tran_id: \"0\",\n          date: initialValues.date,\n          entry_no: initialValues.entry_no,\n          company_id: selectedCompany.company_id,\n          remarks: initialValues.remarks,\n          boxList: boxList,\n          user_id: localStorage.getItem(\"userId\"),\n        };\n        let response = await CommonController.commonApiCallFilter(\n          \"dc/insertDc\",\n          body,\n          \"post\",\n          \"node\"\n        );\n\n        if (response.status === 200) {\n          showSuccessToast(response.message);\n          window.location.reload();\n        } else {\n          showErrorToast(response.message);\n        }\n      }\n    } catch (err) {\n      showErrorToast(err);\n    }\n  };\n  return (\n    <div className=\"container-fluid mt-5 pt-5\">\n      <div className=\"row\">\n        <div className=\"entry-details d-flex col-md-6\">\n          <div className=\"mr-3\">\n            <h5>Date</h5>\n            <TextField\n              value={initialValues.date}\n              fullWidth\n              label=\"\"\n              variant=\"outlined\"\n              size=\"small\"\n              disabled\n            />\n          </div>\n          <div className=\"mr-3\">\n            <h5>Entry No.</h5>{\" \"}\n            <TextField\n              value={initialValues.entry_no}\n              fullWidth\n              label=\"\"\n              variant=\"outlined\"\n              size=\"small\"\n              disabled\n            />\n          </div>\n          <div>\n            <h5>Remarks</h5>\n            <TextField\n              label=\"Remarks\"\n              fullWidth\n              value={initialValues.remarks}\n              variant=\"outlined\"\n              size=\"small\"\n              name=\"remarks\"\n              onChange={(e) =>\n                setInitialValues({ ...initialValues, remarks: e.target.value })\n              }\n            />\n          </div>\n        </div>\n        <div className=\"col-md-4  ml-auto \">\n          <h5>Pick Company</h5>\n          <div className=\"d-flex align-items-center\">\n            <Autocomplete\n              id=\"combo-box-demo\"\n              options={companyList}\n              fullWidth\n              size=\"small\"\n              // getOptionLabel={(option) => option.company_name}\n              value={selectedCompany}\n              onChange={(e, value) => setSelectedCompany(value)}\n              renderInput={(params) => (\n                <TextField\n                  {...params}\n                  onInput={(e) => {\n                    debounce(getCompanyList(e.target.value, 200));\n                  }}\n                  label=\"\"\n                  variant=\"outlined\"\n                />\n              )}\n            />\n            {!showPackagingList && selectedCompany && (\n              <Button\n                color=\"primary\"\n                className=\"mx-3 w-25\"\n                disableElevation\n                variant=\"contained\"\n                onClick={togglePackagingList}\n              >\n                Pick DC\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n      <hr />\n      {showPackagingList && (\n        <TablePicker\n          selectedItems={selectedPackingList}\n          columns={packagingListColumn}\n          url={\"dc/pickDC\"}\n          isNode=\"node\"\n          apiBody={{ company_id: selectedCompany?.company_id }}\n          apiType=\"post\"\n          onPickerClose={togglePackagingList}\n          onSubmit={handlePackagingList}\n        />\n      )}\n\n      {selectedPackingList.length > 0 && (\n        <SimpleTable\n          columns={packagingListColumn}\n          rows={selectedPackingList}\n          // onDelete={handleAddedCustomer}\n        />\n      )}\n\n      {itemListBody &&\n        itemListBody.dcList.length > 0 &&\n        boxList.map((box, index) => {\n          return (\n            <div className=\"box-list mt-5 pt-5\" key={index}>\n              <div className=\"d-flex\">\n                <h2 className=\"box-header\">Box no. {index + 1}</h2>\n                <div className=\" ml-auto\">\n                  {showItemList !== index && (\n                    <Button\n                      color=\"primary\"\n                      className=\"mr-2\"\n                      disableElevation\n                      variant=\"contained\"\n                      onClick={() => toggleItemList(index)}\n                    >\n                      Pick Item\n                    </Button>\n                  )}\n\n                  <Button\n                    color=\"primary\"\n                    className=\"mr-2 ml-auto\"\n                    disableElevation\n                    variant=\"contained\"\n                    onClick={() => removeBox(index)}\n                  >\n                    Remove Box\n                  </Button>\n                </div>\n              </div>\n              <hr />\n              {showItemList === index && (\n                <TablePicker\n                  selectedItems={box.items}\n                  columns={itemListColumn}\n                  url={\"dc/pickDCItem\"}\n                  isNode=\"node\"\n                  apiBody={itemListBody}\n                  apiType=\"post\"\n                  onPickerClose={() => toggleItemList(null)}\n                  onSubmit={(data) => handleIemList(data, index)}\n                />\n              )}\n              {box.items.length > 0 && showItemList !== index && (\n                <SimpleTable\n                  columns={itemListColumn}\n                  rows={box.items}\n                  onDelete={(item) => deletePickItem(item, index)}\n                />\n              )}\n            </div>\n          );\n        })}\n\n      {selectedPackingList.length > 0 && (\n        <div className=\"float-action-btn\">\n          <Fab\n            variant=\"extended\"\n            onClick={addBox}\n            size=\"medium\"\n            color=\"primary\"\n            aria-label=\"add\"\n          >\n            <AddIcon />\n            Add Box\n          </Fab>\n        </div>\n      )}\n      <hr />\n      <div className=\"w-100 mt-3 text-right\">\n        <Button\n          color=\"primary\"\n          className=\"mr-2\"\n          disableElevation\n          variant=\"contained\"\n          onClick={submitDC}\n        >\n          Save\n        </Button>\n        <Button color=\"primary\" disableElevation variant=\"contained\">\n          Cancel\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default NewDCPackaging;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"F:\\\\React code\\\\diagnostic\\\\src\\\\pages\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport MainLayout from '../layouts/layout';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { checkAuthOTP, getDecryptUserId } from '../_redux/actions/auth.action';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SwitchApp = props => {\n  _s();\n\n  const isAuthorisedByUrl = new URLSearchParams(props.location.search).get(\"token\");\n  const dispatch = useDispatch();\n  const getDecryptUserDetailsResponse = useSelector(state => state.auth.decryptUserDetails);\n  const checkAuthOtpResponse = useSelector(state => state.auth.getOtpResponse);\n  useEffect(() => {\n    if (isAuthorisedByUrl) {\n      const param = {\n        encrypt_user_id: isAuthorisedByUrl\n      };\n      dispatch(getDecryptUserId(param));\n    } else {\n      window.location = \"/\";\n    }\n  }, [isAuthorisedByUrl]);\n  useEffect(() => {\n    if (getDecryptUserDetailsResponse) {\n      console.log(getDecryptUserDetailsResponse);\n      var login = `grant_type=password&username=${getDecryptUserDetailsResponse.user_name}&password=${getDecryptUserDetailsResponse.password}`;\n      dispatch(checkAuthOTP(login));\n    }\n  }, [getDecryptUserDetailsResponse]);\n  useEffect(() => {\n    if (!(Object.keys(checkAuthOtpResponse).length === 0 && checkAuthOtpResponse.constructor === Object)) {\n      if (checkAuthOtpResponse.valid) {\n        localStorage.setItem(\"token\", checkAuthOtpResponse.access_token);\n        localStorage.setItem(\"login\", checkAuthOtpResponse.valid);\n        localStorage.setItem(\"userName\", checkAuthOtpResponse.userName);\n        localStorage.setItem(\"userId\", checkAuthOtpResponse.userId);\n        localStorage.setItem(\"code\", checkAuthOtpResponse.code);\n        localStorage.setItem(\"encrypt_userId\", checkAuthOtpResponse.encrypt_userId);\n        window.location = \"/\";\n      }\n    }\n  }, [checkAuthOtpResponse]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"switch_loader\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Please wait....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 13\n  }, this);\n};\n\n_s(SwitchApp, \"5RN+OYYz28h1G+NI1M9QqQcgi2o=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = SwitchApp;\nexport default SwitchApp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SwitchApp\");","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/index.js"],"names":["React","useEffect","MainLayout","CircularProgress","useDispatch","useSelector","checkAuthOTP","getDecryptUserId","SwitchApp","props","isAuthorisedByUrl","URLSearchParams","location","search","get","dispatch","getDecryptUserDetailsResponse","state","auth","decryptUserDetails","checkAuthOtpResponse","getOtpResponse","param","encrypt_user_id","window","console","log","login","user_name","password","Object","keys","length","constructor","valid","localStorage","setItem","access_token","userName","userId","code","encrypt_userId"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,YAAT,EAAuBC,gBAAvB,QAA+C,+BAA/C;;;AAKA,MAAMC,SAAS,GAAIC,KAAD,IAAW;AAAA;;AAC7B,QAAMC,iBAAiB,GAAG,IAAIC,eAAJ,CAAoBF,KAAK,CAACG,QAAN,CAAeC,MAAnC,EAA2CC,GAA3C,CAA+C,OAA/C,CAA1B;AACA,QAAMC,QAAQ,GAAGX,WAAW,EAA5B;AACA,QAAMY,6BAA6B,GAAGX,WAAW,CAAEY,KAAD,IAAWA,KAAK,CAACC,IAAN,CAAWC,kBAAvB,CAAjD;AACA,QAAMC,oBAAoB,GAAGf,WAAW,CAAEY,KAAD,IAAWA,KAAK,CAACC,IAAN,CAAWG,cAAvB,CAAxC;AAEApB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAGS,iBAAH,EAAqB;AACjB,YAAMY,KAAK,GAAG;AACVC,QAAAA,eAAe,EAACb;AADN,OAAd;AAGAK,MAAAA,QAAQ,CAACR,gBAAgB,CAACe,KAAD,CAAjB,CAAR;AACH,KALD,MAMI;AACAE,MAAAA,MAAM,CAACZ,QAAP,GAAkB,GAAlB;AACH;AACJ,GAVQ,EAUP,CAACF,iBAAD,CAVO,CAAT;AAaAT,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAGe,6BAAH,EAAiC;AAC7BS,MAAAA,OAAO,CAACC,GAAR,CAAYV,6BAAZ;AACA,UAAIW,KAAK,GAAI,gCAA+BX,6BAA6B,CAACY,SAAU,aAAYZ,6BAA6B,CAACa,QAAS,EAAvI;AACAd,MAAAA,QAAQ,CAACT,YAAY,CAACqB,KAAD,CAAb,CAAR;AACH;AACJ,GANQ,EAMP,CAACX,6BAAD,CANO,CAAT;AAQAf,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAG,EAAE6B,MAAM,CAACC,IAAP,CAAYX,oBAAZ,EAAkCY,MAAlC,KAA6C,CAA7C,IAAkDZ,oBAAoB,CAACa,WAArB,KAAqCH,MAAzF,CAAH,EAAoG;AAChG,UAAGV,oBAAoB,CAACc,KAAxB,EAA8B;AAC1BC,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BhB,oBAAoB,CAACiB,YAAlD;AACAF,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BhB,oBAAoB,CAACc,KAAlD;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAgChB,oBAAoB,CAACkB,QAArD;AACAH,QAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA8BhB,oBAAoB,CAACmB,MAAnD;AACAJ,QAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA4BhB,oBAAoB,CAACoB,IAAjD;AACAL,QAAAA,YAAY,CAACC,OAAb,CAAqB,gBAArB,EAAsChB,oBAAoB,CAACqB,cAA3D;AACAjB,QAAAA,MAAM,CAACZ,QAAP,GAAkB,GAAlB;AACH;AACJ;AACJ,GAZQ,EAYP,CAACQ,oBAAD,CAZO,CAAT;AAeI,sBAAQ;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,2BACA;AAAA,8BACI,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,UAAR;AAOH,CAjDD;;GAAMZ,S;UAEWJ,W,EACqBC,W,EACTA,W;;;KAJvBG,S;AAmDN,eAAeA,SAAf","sourcesContent":["import React, { useEffect } from 'react';\r\nimport MainLayout from '../layouts/layout';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { checkAuthOTP, getDecryptUserId } from '../_redux/actions/auth.action';\r\n\r\n\r\n\r\n\r\nconst SwitchApp = (props) => {\r\nconst isAuthorisedByUrl = new URLSearchParams(props.location.search).get(\"token\");\r\nconst dispatch = useDispatch();\r\nconst getDecryptUserDetailsResponse = useSelector((state) => state.auth.decryptUserDetails);\r\nconst checkAuthOtpResponse = useSelector((state) => state.auth.getOtpResponse);\r\n\r\nuseEffect(() => {\r\n    if(isAuthorisedByUrl){\r\n        const param = {\r\n            encrypt_user_id:isAuthorisedByUrl\r\n        }\r\n        dispatch(getDecryptUserId(param));\r\n    }\r\n    else{\r\n        window.location = \"/\";\r\n    }\r\n},[isAuthorisedByUrl]);\r\n\r\n\r\nuseEffect(() => {\r\n    if(getDecryptUserDetailsResponse){\r\n        console.log(getDecryptUserDetailsResponse);\r\n        var login = `grant_type=password&username=${getDecryptUserDetailsResponse.user_name}&password=${getDecryptUserDetailsResponse.password}`;\r\n        dispatch(checkAuthOTP(login));\r\n    }\r\n},[getDecryptUserDetailsResponse]);\r\n\r\nuseEffect(() => {\r\n    if(!(Object.keys(checkAuthOtpResponse).length === 0 && checkAuthOtpResponse.constructor === Object)){\r\n        if(checkAuthOtpResponse.valid){\r\n            localStorage.setItem(\"token\",checkAuthOtpResponse.access_token);\r\n            localStorage.setItem(\"login\",checkAuthOtpResponse.valid);\r\n            localStorage.setItem(\"userName\",checkAuthOtpResponse.userName);\r\n            localStorage.setItem(\"userId\",checkAuthOtpResponse.userId);\r\n            localStorage.setItem(\"code\",checkAuthOtpResponse.code);\r\n            localStorage.setItem(\"encrypt_userId\",checkAuthOtpResponse.encrypt_userId);\r\n            window.location = \"/\";\r\n        }\r\n    }\r\n},[checkAuthOtpResponse])\r\n\r\n\r\n    return  <div className=\"switch_loader\">\r\n            <div>\r\n                <CircularProgress />\r\n                <h4>Please wait....</h4>\r\n            </div>\r\n    </div>\r\n\r\n}\r\n\r\nexport default SwitchApp;"]},"metadata":{},"sourceType":"module"}
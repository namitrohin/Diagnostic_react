{"ast":null,"code":"import React,{useEffect}from'react';import MainLayout from'../layouts/layout';import CircularProgress from'@material-ui/core/CircularProgress';import{useDispatch,useSelector}from'react-redux';import{checkAuthOTP,getDecryptUserId}from'../_redux/actions/auth.action';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SwitchApp=function SwitchApp(props){var isAuthorisedByUrl=new URLSearchParams(props.location.search).get(\"token\");var dispatch=useDispatch();var getDecryptUserDetailsResponse=useSelector(function(state){return state.auth.decryptUserDetails;});var checkAuthOtpResponse=useSelector(function(state){return state.auth.getOtpResponse;});useEffect(function(){if(isAuthorisedByUrl){var param={encrypt_user_id:isAuthorisedByUrl};dispatch(getDecryptUserId(param));}else{window.location=\"/\";}},[isAuthorisedByUrl]);useEffect(function(){if(getDecryptUserDetailsResponse){console.log(getDecryptUserDetailsResponse);var login=\"grant_type=password&username=\".concat(getDecryptUserDetailsResponse.user_name,\"&password=\").concat(getDecryptUserDetailsResponse.password);dispatch(checkAuthOTP(login));}},[getDecryptUserDetailsResponse]);useEffect(function(){if(!(Object.keys(checkAuthOtpResponse).length===0&&checkAuthOtpResponse.constructor===Object)){if(checkAuthOtpResponse.valid){localStorage.setItem(\"token\",checkAuthOtpResponse.access_token);localStorage.setItem(\"login\",checkAuthOtpResponse.valid);localStorage.setItem(\"userName\",checkAuthOtpResponse.userName);localStorage.setItem(\"userId\",checkAuthOtpResponse.userId);localStorage.setItem(\"code\",checkAuthOtpResponse.code);localStorage.setItem(\"encrypt_userId\",checkAuthOtpResponse.encrypt_userId);window.location=\"/\";}}},[checkAuthOtpResponse]);return/*#__PURE__*/_jsx(\"div\",{className:\"switch_loader\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CircularProgress,{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Please wait....\"})]})});};export default SwitchApp;","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/index.js"],"names":["React","useEffect","MainLayout","CircularProgress","useDispatch","useSelector","checkAuthOTP","getDecryptUserId","SwitchApp","props","isAuthorisedByUrl","URLSearchParams","location","search","get","dispatch","getDecryptUserDetailsResponse","state","auth","decryptUserDetails","checkAuthOtpResponse","getOtpResponse","param","encrypt_user_id","window","console","log","login","user_name","password","Object","keys","length","constructor","valid","localStorage","setItem","access_token","userName","userId","code","encrypt_userId"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,UAAP,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oCAA7B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,YAAT,CAAuBC,gBAAvB,KAA+C,+BAA/C,C,wFAKA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,CAC7B,GAAMC,CAAAA,iBAAiB,CAAG,GAAIC,CAAAA,eAAJ,CAAoBF,KAAK,CAACG,QAAN,CAAeC,MAAnC,EAA2CC,GAA3C,CAA+C,OAA/C,CAA1B,CACA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA,GAAMY,CAAAA,6BAA6B,CAAGX,WAAW,CAAC,SAACY,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAN,CAAWC,kBAAtB,EAAD,CAAjD,CACA,GAAMC,CAAAA,oBAAoB,CAAGf,WAAW,CAAC,SAACY,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAN,CAAWG,cAAtB,EAAD,CAAxC,CAEApB,SAAS,CAAC,UAAM,CACZ,GAAGS,iBAAH,CAAqB,CACjB,GAAMY,CAAAA,KAAK,CAAG,CACVC,eAAe,CAACb,iBADN,CAAd,CAGAK,QAAQ,CAACR,gBAAgB,CAACe,KAAD,CAAjB,CAAR,CACH,CALD,IAMI,CACAE,MAAM,CAACZ,QAAP,CAAkB,GAAlB,CACH,CACJ,CAVQ,CAUP,CAACF,iBAAD,CAVO,CAAT,CAaAT,SAAS,CAAC,UAAM,CACZ,GAAGe,6BAAH,CAAiC,CAC7BS,OAAO,CAACC,GAAR,CAAYV,6BAAZ,EACA,GAAIW,CAAAA,KAAK,wCAAmCX,6BAA6B,CAACY,SAAjE,sBAAuFZ,6BAA6B,CAACa,QAArH,CAAT,CACAd,QAAQ,CAACT,YAAY,CAACqB,KAAD,CAAb,CAAR,CACH,CACJ,CANQ,CAMP,CAACX,6BAAD,CANO,CAAT,CAQAf,SAAS,CAAC,UAAM,CACZ,GAAG,EAAE6B,MAAM,CAACC,IAAP,CAAYX,oBAAZ,EAAkCY,MAAlC,GAA6C,CAA7C,EAAkDZ,oBAAoB,CAACa,WAArB,GAAqCH,MAAzF,CAAH,CAAoG,CAChG,GAAGV,oBAAoB,CAACc,KAAxB,CAA8B,CAC1BC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA6BhB,oBAAoB,CAACiB,YAAlD,EACAF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA6BhB,oBAAoB,CAACc,KAAlD,EACAC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAgChB,oBAAoB,CAACkB,QAArD,EACAH,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA8BhB,oBAAoB,CAACmB,MAAnD,EACAJ,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA4BhB,oBAAoB,CAACoB,IAAjD,EACAL,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAsChB,oBAAoB,CAACqB,cAA3D,EACAjB,MAAM,CAACZ,QAAP,CAAkB,GAAlB,CACH,CACJ,CACJ,CAZQ,CAYP,CAACQ,oBAAD,CAZO,CAAT,CAeI,mBAAQ,YAAK,SAAS,CAAC,eAAf,uBACA,oCACI,KAAC,gBAAD,IADJ,cAEI,uCAFJ,GADA,EAAR,CAOH,CAjDD,CAmDA,cAAeZ,CAAAA,SAAf","sourcesContent":["import React, { useEffect } from 'react';\r\nimport MainLayout from '../layouts/layout';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { checkAuthOTP, getDecryptUserId } from '../_redux/actions/auth.action';\r\n\r\n\r\n\r\n\r\nconst SwitchApp = (props) => {\r\nconst isAuthorisedByUrl = new URLSearchParams(props.location.search).get(\"token\");\r\nconst dispatch = useDispatch();\r\nconst getDecryptUserDetailsResponse = useSelector((state) => state.auth.decryptUserDetails);\r\nconst checkAuthOtpResponse = useSelector((state) => state.auth.getOtpResponse);\r\n\r\nuseEffect(() => {\r\n    if(isAuthorisedByUrl){\r\n        const param = {\r\n            encrypt_user_id:isAuthorisedByUrl\r\n        }\r\n        dispatch(getDecryptUserId(param));\r\n    }\r\n    else{\r\n        window.location = \"/\";\r\n    }\r\n},[isAuthorisedByUrl]);\r\n\r\n\r\nuseEffect(() => {\r\n    if(getDecryptUserDetailsResponse){\r\n        console.log(getDecryptUserDetailsResponse);\r\n        var login = `grant_type=password&username=${getDecryptUserDetailsResponse.user_name}&password=${getDecryptUserDetailsResponse.password}`;\r\n        dispatch(checkAuthOTP(login));\r\n    }\r\n},[getDecryptUserDetailsResponse]);\r\n\r\nuseEffect(() => {\r\n    if(!(Object.keys(checkAuthOtpResponse).length === 0 && checkAuthOtpResponse.constructor === Object)){\r\n        if(checkAuthOtpResponse.valid){\r\n            localStorage.setItem(\"token\",checkAuthOtpResponse.access_token);\r\n            localStorage.setItem(\"login\",checkAuthOtpResponse.valid);\r\n            localStorage.setItem(\"userName\",checkAuthOtpResponse.userName);\r\n            localStorage.setItem(\"userId\",checkAuthOtpResponse.userId);\r\n            localStorage.setItem(\"code\",checkAuthOtpResponse.code);\r\n            localStorage.setItem(\"encrypt_userId\",checkAuthOtpResponse.encrypt_userId);\r\n            window.location = \"/\";\r\n        }\r\n    }\r\n},[checkAuthOtpResponse])\r\n\r\n\r\n    return  <div className=\"switch_loader\">\r\n            <div>\r\n                <CircularProgress />\r\n                <h4>Please wait....</h4>\r\n            </div>\r\n    </div>\r\n\r\n}\r\n\r\nexport default SwitchApp;"]},"metadata":{},"sourceType":"module"}
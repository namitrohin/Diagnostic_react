{"ast":null,"code":"import _toConsumableArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableContainer from\"@material-ui/core/TableContainer\";import TableHead from\"@material-ui/core/TableHead\";import TablePagination from\"@material-ui/core/TablePagination\";import TableRow from\"@material-ui/core/TableRow\";import TableSortLabel from\"@material-ui/core/TableSortLabel\";import Paper from\"@material-ui/core/Paper\";import Checkbox from\"@material-ui/core/Checkbox\";import{makeStyles,Button,withStyles,Radio}from\"@material-ui/core\";import{useEffect}from\"react\";import{CommonController}from\"../_redux/controller/common.controller\";import{useState}from\"react\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledTableCell=withStyles(function(theme){return{head:{backgroundColor:\"#1280cf\",color:theme.palette.common.white},body:{fontSize:14}};})(TableCell);function EnhancedTableHead(props){var column=props.column,classes=props.classes,onSelectAllClick=props.onSelectAllClick,order=props.order,orderBy=props.orderBy,_props$numSelected=props.numSelected,numSelected=_props$numSelected===void 0?0:_props$numSelected,rowCount=props.rowCount,onRequestSort=props.onRequestSort;var createSortHandler=function createSortHandler(property){return function(event){onRequestSort(event,property);};};return/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{padding:\"checkbox\",style:{width:100}}),column.map(function(headCell,j){if(j<column.length&&column[j+1]){return/*#__PURE__*/_jsx(TableCell,{align:column[j+1].numeric?\"right\":\"left\"//    padding={column[j + 1].disablePadding ? \"none\" : \"normal\"}\n,sortDirection:orderBy===column[j+1].id?order:false,children:/*#__PURE__*/_jsxs(TableSortLabel,{active:orderBy===column[j+1].id,direction:orderBy===column[j+1].id?order:\"asc\",onClick:createSortHandler(column[j+1].id),children:[column[j+1].label,orderBy===column[j+1].id?/*#__PURE__*/_jsx(\"span\",{className:classes.visuallyHidden,children:order===\"desc\"?\"sorted descending\":\"sorted ascending\"}):null]})},column[j+1].id);}})]})});}var useStyles=makeStyles(function(theme){return{root:{width:\"100%\",marginTop:30},paper:{width:\"100%\",marginBottom:theme.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:\"rect(0 0 0 0)\",height:1,margin:-1,overflow:\"hidden\",padding:0,position:\"absolute\",top:20,width:1}};});export var TablePicker=function TablePicker(_ref){var columns=_ref.columns,url=_ref.url,onSubmit=_ref.onSubmit,onPickerClose=_ref.onPickerClose,selectedItems=_ref.selectedItems,type=_ref.type,_ref$isNode=_ref.isNode,isNode=_ref$isNode===void 0?\"\":_ref$isNode,_ref$apiType=_ref.apiType,apiType=_ref$apiType===void 0?\"\":_ref$apiType,_ref$apiBody=_ref.apiBody,apiBody=_ref$apiBody===void 0?null:_ref$apiBody;var classes=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _React$useState=React.useState(selectedItems&&Array.isArray(selectedItems)?selectedItems.length>0?[]:selectedItems:selectedItems),_React$useState2=_slicedToArray(_React$useState,2),selected=_React$useState2[0],setSelected=_React$useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),records=_useState4[0],setRecords=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),rowCount=_useState6[0],setRowCount=_useState6[1];var _useState7=useState({pageNo:1,pageSize:10,filter_value:\"\",sort_column:\"\",sort_order:\"\"}),_useState8=_slicedToArray(_useState7,2),params=_useState8[0],setParams=_useState8[1];useEffect(function(){setSelected(selectedItems);},[selectedItems]);useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);if(!apiBody){_context.next=6;break;}_context.next=4;return CommonController.commonApiCall(url,params,apiBody,isNode).then(function(data){setRecords(data.data);setRowCount(data.recordsFiltered);});case 4:_context.next=8;break;case 6:_context.next=8;return CommonController.tablePickerController(url,params,isNode).then(function(data){setRecords(data.data);setRowCount(data.recordsFiltered);});case 8:setLoading(false);case 9:case\"end\":return _context.stop();}}},_callee);})),[]);useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);if(!apiBody){_context2.next=6;break;}_context2.next=4;return CommonController.commonApiCall(url,params,apiBody,isNode).then(function(data){setRecords(data.data);setRowCount(data.recordsFiltered);});case 4:_context2.next=8;break;case 6:_context2.next=8;return CommonController.tablePickerController(url,params,isNode).then(function(data){setRecords(data.data);setRowCount(data.recordsFiltered);});case 8:setLoading(false);case 9:case\"end\":return _context2.stop();}}},_callee2);})),[params]);var handleRequestSort=function handleRequestSort(event,property){var isAsc=params.sort_order!==\"\"&&params.sort_order===\"asc\"?\"desc\":\"asc\";setParams(_objectSpread(_objectSpread({},params),{},{sort_order:isAsc,sort_column:property}));};var handleSelectAllClick=function handleSelectAllClick(event){if(event.target.checked){var newSelecteds=records.map(function(n){return n;});setSelected(newSelecteds);return;}setSelected([]);};var handleClick=function handleClick(event,row){if(Array.isArray(selected)){var tempselected=_toConsumableArray(selected);var selectedIndex=tempselected.findIndex(function(x){return x[columns[0].id]===row[columns[0].id];});if(selectedIndex===-1){tempselected.push(row);}else{tempselected.splice(selectedIndex,1);}setSelected(tempselected);}};var handleRadioClick=function handleRadioClick(event,row){if(!Array.isArray(selected)){setSelected(row);}};var handleChangePage=function handleChangePage(event,newPage){setParams(_objectSpread(_objectSpread({},params),{},{pageNo:newPage}));};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){setParams(_objectSpread(_objectSpread({},params),{},{pageSize:parseInt(event.target.value,10)}));};var isSelected=function isSelected(id){if(Array.isArray(selected)){return selected.findIndex(function(x){return x[columns[0].id]===id;})!==-1;}else{return selected&&selected[columns[0].id]===id;}};return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsxs(Paper,{className:classes.paper,children:[/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{className:classes.table,\"aria-labelledby\":\"tableTitle\",size:\"small\",\"aria-label\":\"enhanced table\",children:[/*#__PURE__*/_jsx(EnhancedTableHead,{classes:classes,column:columns,numSelected:selected?Array.isArray(selected)?selected.length:1:0,order:params.sort_order,orderBy:params.sort_column,onSelectAllClick:handleSelectAllClick,onRequestSort:handleRequestSort,rowCount:params.pageSize}),/*#__PURE__*/_jsx(TableBody,{children:loading?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:12,className:\"text-center\",children:\"Please wait\"})}):records.length>0?records.map(function(row,index){if(index<=records.length){var isItemSelected=isSelected(row[columns[0].id]);var labelId=\"enhanced-table-checkbox-\".concat(index);return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{padding:\"checkbox\",children:type&&type==\"single\"?/*#__PURE__*/_jsx(Radio,{color:\"primary\",checked:isItemSelected,inputProps:{\"aria-labelledby\":labelId},onChange:function onChange(event){return handleRadioClick(event,row);}}):/*#__PURE__*/_jsx(Checkbox,{color:\"primary\",checked:isItemSelected,inputProps:{\"aria-labelledby\":labelId},onChange:function onChange(event){return handleClick(event,row);}})}),columns.map(function(col,colIndex){if(columns[colIndex+1]){return/*#__PURE__*/_jsx(TableCell,{style:{whiteSpace:\"nowrap\"},align:\"left\",children:columns[colIndex+1].dateFormat?moment(row[columns[colIndex+1].id]).format(\"DD/MM/YYYY\"):row[columns[colIndex+1].id]},colIndex+2);}})]},row[columns[0].id]);}}):/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{children:\"No Data\"})})})]})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[10,15,25],onChangePage:handleChangePage,onChangeRowsPerPage:handleChangeRowsPerPage,component:\"div\",count:rowCount,rowsPerPage:params.pageSize,page:params.pageNo// onPageChange={}\n// onRowsPerPageChange={}\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid text-right\",children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",className:\"mr-2\",disableElevation:true,variant:\"contained\",onClick:function onClick(){return onSubmit(selected);},children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{onClick:onPickerClose,color:\"primary\",disableElevation:true,variant:\"contained\",children:\"Close\"})]})]});};","map":{"version":3,"sources":["F:/React code/diagnostic/src/components/table-picker.js"],"names":["React","Table","TableBody","TableCell","TableContainer","TableHead","TablePagination","TableRow","TableSortLabel","Paper","Checkbox","makeStyles","Button","withStyles","Radio","useEffect","CommonController","useState","moment","StyledTableCell","theme","head","backgroundColor","color","palette","common","white","body","fontSize","EnhancedTableHead","props","column","classes","onSelectAllClick","order","orderBy","numSelected","rowCount","onRequestSort","createSortHandler","property","event","width","map","headCell","j","length","numeric","id","label","visuallyHidden","useStyles","root","marginTop","paper","marginBottom","spacing","table","minWidth","border","clip","height","margin","overflow","padding","position","top","TablePicker","columns","url","onSubmit","onPickerClose","selectedItems","type","isNode","apiType","apiBody","loading","setLoading","Array","isArray","selected","setSelected","records","setRecords","setRowCount","pageNo","pageSize","filter_value","sort_column","sort_order","params","setParams","commonApiCall","then","data","recordsFiltered","tablePickerController","handleRequestSort","isAsc","handleSelectAllClick","target","checked","newSelecteds","n","handleClick","row","tempselected","selectedIndex","findIndex","x","push","splice","handleRadioClick","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","value","isSelected","index","isItemSelected","labelId","col","colIndex","whiteSpace","dateFormat","format"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\n\nimport Paper from \"@material-ui/core/Paper\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\n\nimport { makeStyles, Button, withStyles, Radio } from \"@material-ui/core\";\nimport { useEffect } from \"react\";\nimport { CommonController } from \"../_redux/controller/common.controller\";\nimport { useState } from \"react\";\nimport moment from \"moment\";\n\nconst StyledTableCell = withStyles((theme) => ({\n  head: {\n    backgroundColor: \"#1280cf\",\n    color: theme.palette.common.white,\n  },\n  body: {\n    fontSize: 14,\n  },\n}))(TableCell);\n\nfunction EnhancedTableHead(props) {\n  const {\n    column,\n    classes,\n    onSelectAllClick,\n    order,\n    orderBy,\n    numSelected = 0,\n    rowCount,\n    onRequestSort,\n  } = props;\n\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        <TableCell padding=\"checkbox\" style={{ width: 100 }}></TableCell>\n\n        {column.map((headCell, j) => {\n          if (j < column.length && column[j + 1]) {\n            return (\n              <TableCell\n                key={column[j + 1].id}\n                align={column[j + 1].numeric ? \"right\" : \"left\"}\n                //    padding={column[j + 1].disablePadding ? \"none\" : \"normal\"}\n                sortDirection={orderBy === column[j + 1].id ? order : false}\n              >\n                <TableSortLabel\n                  active={orderBy === column[j + 1].id}\n                  direction={orderBy === column[j + 1].id ? order : \"asc\"}\n                  onClick={createSortHandler(column[j + 1].id)}\n                >\n                  {column[j + 1].label}\n                  {orderBy === column[j + 1].id ? (\n                    <span className={classes.visuallyHidden}>\n                      {order === \"desc\"\n                        ? \"sorted descending\"\n                        : \"sorted ascending\"}\n                    </span>\n                  ) : null}\n                </TableSortLabel>\n              </TableCell>\n            );\n          }\n        })}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    marginTop: 30,\n  },\n  paper: {\n    width: \"100%\",\n    marginBottom: theme.spacing(2),\n  },\n  table: {\n    minWidth: 750,\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: \"rect(0 0 0 0)\",\n    height: 1,\n    margin: -1,\n    overflow: \"hidden\",\n    padding: 0,\n    position: \"absolute\",\n    top: 20,\n    width: 1,\n  },\n}));\n\nexport const TablePicker = ({\n  columns,\n  url,\n  onSubmit,\n  onPickerClose,\n  selectedItems,\n  type,\n  isNode = \"\",\n  apiType = \"\",\n  apiBody = null,\n}) => {\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n  const [selected, setSelected] = React.useState(\n    selectedItems && Array.isArray(selectedItems)\n      ? selectedItems.length > 0\n        ? []\n        : selectedItems\n      : selectedItems\n  );\n  const [records, setRecords] = useState([]);\n  const [rowCount, setRowCount] = useState(0);\n\n  const [params, setParams] = useState({\n    pageNo: 1,\n    pageSize: 10,\n    filter_value: \"\",\n    sort_column: \"\",\n    sort_order: \"\",\n  });\n\n  useEffect(() => {\n    setSelected(selectedItems);\n  }, [selectedItems]);\n\n  useEffect(async () => {\n    setLoading(true);\n\n    if (apiBody) {\n      await CommonController.commonApiCall(url, params, apiBody, isNode).then(\n        (data) => {\n          setRecords(data.data);\n          setRowCount(data.recordsFiltered);\n        }\n      );\n    } else {\n      await CommonController.tablePickerController(url, params, isNode).then(\n        (data) => {\n          setRecords(data.data);\n          setRowCount(data.recordsFiltered);\n        }\n      );\n    }\n    setLoading(false);\n  }, []);\n\n  useEffect(async () => {\n    setLoading(true);\n    if (apiBody) {\n      await CommonController.commonApiCall(url, params, apiBody, isNode).then(\n        (data) => {\n          setRecords(data.data);\n          setRowCount(data.recordsFiltered);\n        }\n      );\n    } else {\n      await CommonController.tablePickerController(url, params, isNode).then(\n        (data) => {\n          setRecords(data.data);\n          setRowCount(data.recordsFiltered);\n        }\n      );\n    }\n    setLoading(false);\n  }, [params]);\n\n  const handleRequestSort = (event, property) => {\n    const isAsc =\n      params.sort_order !== \"\" && params.sort_order === \"asc\" ? \"desc\" : \"asc\";\n    setParams({ ...params, sort_order: isAsc, sort_column: property });\n  };\n\n  const handleSelectAllClick = (event) => {\n    if (event.target.checked) {\n      const newSelecteds = records.map((n) => n);\n      setSelected(newSelecteds);\n      return;\n    }\n    setSelected([]);\n  };\n\n  const handleClick = (event, row) => {\n    if (Array.isArray(selected)) {\n      var tempselected = [...selected];\n      const selectedIndex = tempselected.findIndex(\n        (x) => x[columns[0].id] === row[columns[0].id]\n      );\n      \n      if (selectedIndex === -1) {\n        tempselected.push(row);\n      } else {\n        tempselected.splice(selectedIndex, 1);\n      }\n\n      setSelected(tempselected);\n    }\n  };\n\n  const handleRadioClick = (event, row) => {\n    if (!Array.isArray(selected)) {\n      setSelected(row);\n    }\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setParams({ ...params, pageNo: newPage });\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setParams({ ...params, pageSize: parseInt(event.target.value, 10) });\n  };\n\n  const isSelected = (id) => {\n    if (Array.isArray(selected)) {\n      return selected.findIndex((x) => x[columns[0].id] === id) !== -1;\n    } else {\n      return selected && selected[columns[0].id] === id;\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      <Paper className={classes.paper}>\n        <TableContainer>\n          <Table\n            className={classes.table}\n            aria-labelledby=\"tableTitle\"\n            size={\"small\"}\n            aria-label=\"enhanced table\"\n          >\n            <EnhancedTableHead\n              classes={classes}\n              column={columns}\n              numSelected={\n                selected ? (Array.isArray(selected) ? selected.length : 1) : 0\n              }\n              order={params.sort_order}\n              orderBy={params.sort_column}\n              onSelectAllClick={handleSelectAllClick}\n              onRequestSort={handleRequestSort}\n              rowCount={params.pageSize}\n            />\n            <TableBody>\n              {loading ? (\n                <TableRow>\n                  <TableCell colSpan={12} className=\"text-center\">\n                    Please wait\n                  </TableCell>\n                </TableRow>\n              ) : records.length > 0 ? (\n                records.map((row, index) => {\n                  if (index <= records.length) {\n                    const isItemSelected = isSelected(row[columns[0].id]);\n                    const labelId = `enhanced-table-checkbox-${index}`;\n\n                    return (\n                      <TableRow key={row[columns[0].id]}>\n                        <TableCell padding=\"checkbox\">\n                          {type && type == \"single\" ? (\n                            <Radio\n                              color=\"primary\"\n                              checked={isItemSelected}\n                              inputProps={{ \"aria-labelledby\": labelId }}\n                              onChange={(event) => handleRadioClick(event, row)}\n                            />\n                          ) : (\n                            <Checkbox\n                              color=\"primary\"\n                              checked={isItemSelected}\n                              inputProps={{ \"aria-labelledby\": labelId }}\n                              onChange={(event) => handleClick(event, row)}\n                            />\n                          )}\n                        </TableCell>\n                        {columns.map((col, colIndex) => {\n                          if (columns[colIndex + 1]) {\n                            return (\n                              <TableCell\n                                style={{ whiteSpace: \"nowrap\" }}\n                                key={colIndex + 2}\n                                align=\"left\"\n                              >\n                                {columns[colIndex + 1].dateFormat\n                                  ? moment(\n                                      row[columns[colIndex + 1].id]\n                                    ).format(\"DD/MM/YYYY\")\n                                  : row[columns[colIndex + 1].id]}\n                              </TableCell>\n                            );\n                          }\n                        })}\n                      </TableRow>\n                    );\n                  }\n                })\n              ) : (\n                <TableRow>\n                  <TableCell>No Data</TableCell>\n                </TableRow>\n              )}\n              {/* {records.length > 0 && (\n                <TableRow\n                  style={{ height: (false ? 33 : 53) * records.length }}\n                >\n                  <TableCell colSpan={6} />\n                </TableRow>\n              )} */}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        <TablePagination\n          rowsPerPageOptions={[10, 15, 25]}\n          onChangePage={handleChangePage}\n          onChangeRowsPerPage={handleChangeRowsPerPage}\n          component=\"div\"\n          count={rowCount}\n          rowsPerPage={params.pageSize}\n          page={params.pageNo}\n          // onPageChange={}\n          // onRowsPerPageChange={}\n        />\n      </Paper>\n      <div className=\"container-fluid text-right\">\n        <Button\n          color=\"primary\"\n          className=\"mr-2\"\n          disableElevation\n          variant=\"contained\"\n          onClick={() => onSubmit(selected)}\n        >\n          Submit\n        </Button>\n        <Button\n          onClick={onPickerClose}\n          color=\"primary\"\n          disableElevation\n          variant=\"contained\"\n        >\n          Close\n        </Button>\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
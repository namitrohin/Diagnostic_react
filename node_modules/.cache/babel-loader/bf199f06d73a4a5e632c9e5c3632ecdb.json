{"ast":null,"code":"import _objectSpread from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Checkbox,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TextField,Button}from\"@material-ui/core\";import{Autocomplete}from\"@material-ui/lab\";import{withStyles}from\"@material-ui/styles\";import React,{useEffect,useState}from\"react\";import{showErrorToast,showSuccessToast}from\"../../../components/common\";import{CommonController}from\"../../../_redux/controller/common.controller\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledTableCell=withStyles(function(theme){return{head:{backgroundColor:theme.palette.common.black,color:theme.palette.common.white},body:{fontSize:14}};})(TableCell);var UserRightList=function UserRightList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),menuList=_useState2[0],setMenuList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),transactionList=_useState4[0],setTransactionList=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedMenu=_useState6[0],setSelectedMenu=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedTransaction=_useState8[0],setSelectedTransaction=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),userRightList=_useState10[0],setUserRightList=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),selectedUserRight=_useState12[0],setSelectedUserRight=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),filteredArray=_useState14[0],setFilteredArray=_useState14[1];var getMenuList=function getMenuList(){CommonController.commonApiCallFilter(\"UserRight/UserTransactionMenuList\").then(function(data){return setMenuList(data.objList.menuList);}).catch(function(err){showErrorToast(err);});};var getTransactionList=function getTransactionList(id){CommonController.commonApiCallFilter(\"UserRight/UserTransactionList\",{menu_id:id}).then(function(data){return setTransactionList(data.objList.transctionList);}).catch(function(err){showErrorToast(err);});};var getUserRightList=function getUserRightList(id){CommonController.commonApiCallFilter(\"UserRight/UserRightTransactionBrowse\",{transaction_id:id}).then(function(data){setUserRightList(data);setFilteredArray(data);}).catch(function(err){showErrorToast(err);});};var onSearch=function onSearch(e){if(e.code===\"Enter\"){var items=userRightList.filter(function(x){return x.employee==e.target.value;});if(items.length>0){setFilteredArray(items);}}};useEffect(function(){getMenuList();},[]);var handleMenuChange=function handleMenuChange(event,value){setSelectedMenu(value);if(value){getTransactionList(value.id);}};var handleTransactionChange=function handleTransactionChange(event,value){setSelectedTransaction(value);if(value){getUserRightList(value.id);}};var onUserRightChange=function onUserRightChange(obj,key,checked){var selected=_toConsumableArray(selectedUserRight);var item=obj;item[key]=checked?\"True\":\"False\";var filteredIndex=selectedUserRight.findIndex(function(x){return x.user_id===obj.user_id;});if(filteredIndex>-1){selected[filteredIndex][key]=checked?\"True\":\"False\";setSelectedUserRight(selected);}else{setSelectedUserRight([].concat(_toConsumableArray(selectedUserRight),[item]));}};var onSave=function onSave(){CommonController.commonApiCallFilter(\"UserRight/UserRightsInsert\",{userRightDetails:selectedUserRight}).then(function(data){if(data.valid){showSuccessToast(\"User updated successfully\");}else{showErrorToast(\"something went wrong\");}}).catch(function(err){showErrorToast(err);});};return/*#__PURE__*/_jsx(\"div\",{className:\"card card-custom gutter-b  px-7 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(Autocomplete,{disablePortal:true,id:\"combo-box-demo1\",options:menuList,getOptionLabel:function getOptionLabel(option){return option.value;},fullWidth:true,onChange:handleMenuChange,value:selectedMenu,size:\"small\",renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{variant:\"outlined\",label:\"Menu Item\"}));}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(Autocomplete,{disablePortal:true,id:\"combo-box-demo1\",options:transactionList,getOptionLabel:function getOptionLabel(option){return option.value;},fullWidth:true,onChange:handleTransactionChange,value:selectedTransaction,size:\"small\",renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{variant:\"outlined\",label:\"Transaction item\"}));}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",fullWidth:true,size:\"small\",label:\"Search\",onKeyDown:onSearch})})]}),/*#__PURE__*/_jsx(Paper,{style:{width:\"100%\",overflow:\"hidden\"},children:/*#__PURE__*/_jsx(TableContainer,{className:\"mt-4\",style:{maxHeight:440},children:/*#__PURE__*/_jsxs(Table,{stickyHeader:true,\"aria-label\":\"sticky table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(StyledTableCell,{children:\"Transaction\"}),/*#__PURE__*/_jsx(StyledTableCell,{children:\"View\"}),/*#__PURE__*/_jsx(StyledTableCell,{children:\"New\"}),/*#__PURE__*/_jsx(StyledTableCell,{children:\"Edit\"}),/*#__PURE__*/_jsx(StyledTableCell,{children:\"Delete\"}),/*#__PURE__*/_jsx(StyledTableCell,{children:\"Print\"}),/*#__PURE__*/_jsx(StyledTableCell,{children:\"Approve\"}),/*#__PURE__*/_jsx(StyledTableCell,{children:\"Revise\"}),/*#__PURE__*/_jsx(StyledTableCell,{children:\"Allocation\"}),/*#__PURE__*/_jsx(StyledTableCell,{children:\"High Priority\"}),/*#__PURE__*/_jsx(StyledTableCell,{children:\"Special Column\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:filteredArray.map(function(menu,index){return/*#__PURE__*/_jsxs(TableRow,{sx:{\"&:last-child td, &:last-child th\":{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{children:menu.employee}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(event){return onUserRightChange(menu,\"view_right\",event.target.checked);},color:\"primary\",checked:menu.view_right==\"True\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(event){return onUserRightChange(menu,\"insert_right\",event.target.checked);},color:\"primary\",checked:menu.insert_right==\"True\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(event){return onUserRightChange(menu,\"edit_button\",event.target.checked);},color:\"primary\",checked:menu.edit_button==\"True\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(event){return onUserRightChange(menu,\"delete_right\",event.target.checked);},color:\"primary\",checked:menu.delete_right==\"True\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(event){return onUserRightChange(menu,\"print_right\",event.target.checked);},color:\"primary\",checked:menu.print_right==\"True\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(event){return onUserRightChange(menu,\"approve_right\",event.target.checked);},color:\"primary\",checked:menu.approve_right==\"True\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(event){return onUserRightChange(menu,\"revise_right\",event.target.checked);},color:\"primary\",checked:menu.revise_right==\"True\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(event){return onUserRightChange(menu,\"allocation_right\",event.target.checked);},color:\"primary\",checked:menu.allocation_right==\"True\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(event){return onUserRightChange(menu,\"high_priority_right\",event.target.checked);},color:\"primary\",checked:menu.high_priority_right==\"True\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(event){return onUserRightChange(menu,\"special_column\",event.target.checked);},color:\"primary\",checked:menu.special_column==\"True\"})})]},index);})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-100 mt-3 text-right\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:onSave,disableElevation:true,children:\"Update\"})})]})});};export default UserRightList;","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/Master/user rights/browse.js"],"names":["Checkbox","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TextField","Button","Autocomplete","withStyles","React","useEffect","useState","showErrorToast","showSuccessToast","CommonController","StyledTableCell","theme","head","backgroundColor","palette","common","black","color","white","body","fontSize","UserRightList","menuList","setMenuList","transactionList","setTransactionList","selectedMenu","setSelectedMenu","selectedTransaction","setSelectedTransaction","userRightList","setUserRightList","selectedUserRight","setSelectedUserRight","filteredArray","setFilteredArray","getMenuList","commonApiCallFilter","then","data","objList","catch","err","getTransactionList","id","menu_id","transctionList","getUserRightList","transaction_id","onSearch","e","code","items","filter","x","employee","target","value","length","handleMenuChange","event","handleTransactionChange","onUserRightChange","obj","key","checked","selected","item","filteredIndex","findIndex","user_id","onSave","userRightDetails","valid","option","params","width","overflow","maxHeight","map","menu","index","border","view_right","insert_right","edit_button","delete_right","print_right","approve_right","revise_right","allocation_right","high_priority_right","special_column"],"mappings":"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","sourcesContent":["import {\n  Checkbox,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TextField,\n  Button,\n} from \"@material-ui/core\";\nimport { Autocomplete } from \"@material-ui/lab\";\nimport { withStyles } from \"@material-ui/styles\";\nimport React, { useEffect, useState } from \"react\";\nimport { showErrorToast, showSuccessToast } from \"../../../components/common\";\nimport { CommonController } from \"../../../_redux/controller/common.controller\";\n\nconst StyledTableCell = withStyles((theme) => ({\n  head: {\n    backgroundColor: theme.palette.common.black,\n    color: theme.palette.common.white,\n  },\n  body: {\n    fontSize: 14,\n  },\n}))(TableCell);\n\nconst UserRightList = () => {\n  const [menuList, setMenuList] = useState([]);\n  const [transactionList, setTransactionList] = useState([]);\n\n  const [selectedMenu, setSelectedMenu] = useState(null);\n  const [selectedTransaction, setSelectedTransaction] = useState(null);\n\n  const [userRightList, setUserRightList] = useState([]);\n  const [selectedUserRight, setSelectedUserRight] = useState([]);\n  const [filteredArray, setFilteredArray] = useState([]);\n\n  const getMenuList = () => {\n    CommonController.commonApiCallFilter(\"UserRight/UserTransactionMenuList\")\n      .then((data) => setMenuList(data.objList.menuList))\n      .catch((err) => {\n        showErrorToast(err);\n      });\n  };\n\n  const getTransactionList = (id) => {\n    CommonController.commonApiCallFilter(\"UserRight/UserTransactionList\", {\n      menu_id: id,\n    })\n      .then((data) => setTransactionList(data.objList.transctionList))\n      .catch((err) => {\n        showErrorToast(err);\n      });\n  };\n\n  const getUserRightList = (id) => {\n    CommonController.commonApiCallFilter(\n      \"UserRight/UserRightTransactionBrowse\",\n      {\n        transaction_id: id,\n      }\n    )\n      .then((data) => {\n        setUserRightList(data);\n        setFilteredArray(data);\n      })\n      .catch((err) => {\n        showErrorToast(err);\n      });\n  };\n\n  const onSearch = (e) => {\n    if (e.code === \"Enter\") {\n      const items = userRightList.filter((x) => x.employee == e.target.value);\n\n      if (items.length > 0) {\n        setFilteredArray(items);\n      }\n    }\n  };\n\n  useEffect(() => {\n    getMenuList();\n  }, []);\n\n  const handleMenuChange = (event, value) => {\n    setSelectedMenu(value);\n    if (value) {\n      getTransactionList(value.id);\n    }\n  };\n\n  const handleTransactionChange = (event, value) => {\n    setSelectedTransaction(value);\n    if (value) {\n      getUserRightList(value.id);\n    }\n  };\n\n  const onUserRightChange = (obj, key, checked) => {\n    let selected = [...selectedUserRight];\n    let item = obj;\n    item[key] = checked ? \"True\" : \"False\";\n    let filteredIndex = selectedUserRight.findIndex(\n      (x) => x.user_id === obj.user_id\n    );\n    if (filteredIndex > -1) {\n      selected[filteredIndex][key] = checked ? \"True\" : \"False\";\n      setSelectedUserRight(selected);\n    } else {\n      setSelectedUserRight([...selectedUserRight, item]);\n    }\n  };\n\n  const onSave = () => {\n    CommonController.commonApiCallFilter(\"UserRight/UserRightsInsert\", {\n      userRightDetails: selectedUserRight,\n    })\n      .then((data) => {\n        if (data.valid) {\n          showSuccessToast(\"User updated successfully\");\n        } else {\n          showErrorToast(\"something went wrong\");\n        }\n      })\n      .catch((err) => {\n        showErrorToast(err);\n      });\n  };\n\n  return (\n    <div className=\"card card-custom gutter-b  px-7 py-3\">\n      <div className=\"container-fluid p-4\">\n        <div className=\"row\">\n          <div className=\"col-md-3\">\n            <Autocomplete\n              disablePortal\n              id=\"combo-box-demo1\"\n              options={menuList}\n              getOptionLabel={(option) => option.value}\n              fullWidth\n              onChange={handleMenuChange}\n              value={selectedMenu}\n              size=\"small\"\n              renderInput={(params) => (\n                <TextField {...params} variant=\"outlined\" label=\"Menu Item\" />\n              )}\n            />\n          </div>\n          <div className=\"col-md-3\">\n            <Autocomplete\n              disablePortal\n              id=\"combo-box-demo1\"\n              options={transactionList}\n              getOptionLabel={(option) => option.value}\n              fullWidth\n              onChange={handleTransactionChange}\n              value={selectedTransaction}\n              size=\"small\"\n              renderInput={(params) => (\n                <TextField\n                  {...params}\n                  variant=\"outlined\"\n                  label=\"Transaction item\"\n                />\n              )}\n            />\n          </div>\n          <div className=\"col-md-3\">\n            <TextField\n              variant=\"outlined\"\n              fullWidth\n              size=\"small\"\n              label=\"Search\"\n              onKeyDown={onSearch}\n            />\n          </div>\n        </div>\n        <Paper style={{ width: \"100%\", overflow: \"hidden\" }}>\n          <TableContainer className=\"mt-4\" style={{ maxHeight: 440 }}>\n            <Table stickyHeader aria-label=\"sticky table\">\n              <TableHead>\n                <TableRow>\n                  <StyledTableCell>Transaction</StyledTableCell>\n                  <StyledTableCell>View</StyledTableCell>\n                  <StyledTableCell>New</StyledTableCell>\n                  <StyledTableCell>Edit</StyledTableCell>\n                  <StyledTableCell>Delete</StyledTableCell>\n                  <StyledTableCell>Print</StyledTableCell>\n                  <StyledTableCell>Approve</StyledTableCell>\n                  <StyledTableCell>Revise</StyledTableCell>\n                  <StyledTableCell>Allocation</StyledTableCell>\n                  <StyledTableCell>High Priority</StyledTableCell>\n                  <StyledTableCell>Special Column</StyledTableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {filteredArray.map((menu, index) => {\n                  return (\n                    <TableRow\n                      sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n                      key={index}\n                    >\n                      <TableCell>{menu.employee}</TableCell>\n                      <TableCell>\n                        <Checkbox\n                          onChange={(event) =>\n                            onUserRightChange(\n                              menu,\n                              \"view_right\",\n                              event.target.checked\n                            )\n                          }\n                          color=\"primary\"\n                          checked={menu.view_right == \"True\"}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Checkbox\n                          onChange={(event) =>\n                            onUserRightChange(\n                              menu,\n                              \"insert_right\",\n                              event.target.checked\n                            )\n                          }\n                          color=\"primary\"\n                          checked={menu.insert_right == \"True\"}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Checkbox\n                          onChange={(event) =>\n                            onUserRightChange(\n                              menu,\n                              \"edit_button\",\n                              event.target.checked\n                            )\n                          }\n                          color=\"primary\"\n                          checked={menu.edit_button == \"True\"}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Checkbox\n                          onChange={(event) =>\n                            onUserRightChange(\n                              menu,\n                              \"delete_right\",\n                              event.target.checked\n                            )\n                          }\n                          color=\"primary\"\n                          checked={menu.delete_right == \"True\"}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Checkbox\n                          onChange={(event) =>\n                            onUserRightChange(\n                              menu,\n                              \"print_right\",\n                              event.target.checked\n                            )\n                          }\n                          color=\"primary\"\n                          checked={menu.print_right == \"True\"}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Checkbox\n                          onChange={(event) =>\n                            onUserRightChange(\n                              menu,\n                              \"approve_right\",\n                              event.target.checked\n                            )\n                          }\n                          color=\"primary\"\n                          checked={menu.approve_right == \"True\"}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Checkbox\n                          onChange={(event) =>\n                            onUserRightChange(\n                              menu,\n                              \"revise_right\",\n                              event.target.checked\n                            )\n                          }\n                          color=\"primary\"\n                          checked={menu.revise_right == \"True\"}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Checkbox\n                          onChange={(event) =>\n                            onUserRightChange(\n                              menu,\n                              \"allocation_right\",\n                              event.target.checked\n                            )\n                          }\n                          color=\"primary\"\n                          checked={menu.allocation_right == \"True\"}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Checkbox\n                          onChange={(event) =>\n                            onUserRightChange(\n                              menu,\n                              \"high_priority_right\",\n                              event.target.checked\n                            )\n                          }\n                          color=\"primary\"\n                          checked={menu.high_priority_right == \"True\"}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Checkbox\n                          onChange={(event) =>\n                            onUserRightChange(\n                              menu,\n                              \"special_column\",\n                              event.target.checked\n                            )\n                          }\n                          color=\"primary\"\n                          checked={menu.special_column == \"True\"}\n                        />\n                      </TableCell>\n                    </TableRow>\n                  );\n                })}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n        <div className=\"w-100 mt-3 text-right\">\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={onSave}\n            disableElevation\n          >\n            Update\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UserRightList;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"F:\\\\React code\\\\diagnostic\\\\src\\\\pages\\\\Auth\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport bg from '../../assets/image/bg-5.jpg';\nimport SimpleReactValidator from 'simple-react-validator';\nimport useForceUpdate from 'use-force-update';\nimport { FormHelperText } from '@material-ui/core';\nimport { connect, useDispatch, useSelector } from 'react-redux';\nimport { checkAuthCred, checkAuthOTP } from '../../_redux/actions/auth.action';\nimport GlobalAlert from '../../components/GlobalAlert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const forceUpdate = useForceUpdate();\n  const [validator, setValidator] = useState(new SimpleReactValidator());\n  const [userDetails, setUserDetails] = useState({\n    user_name: '',\n    password: ''\n  });\n  const [messageAlert, setMessageAlert] = useState({\n    show: false,\n    message: \"\",\n    type: \"\"\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const checkAuthCredResponse = useSelector(state => state.auth);\n  const checkAuthOtpResponse = useSelector(state => state.auth.getOtpResponse);\n  const [otp, setOtp] = useState('');\n\n  const handleOtp = event => {\n    setOtp(event.target.value);\n  };\n\n  const [showOtp, setShowOtp] = useState(false);\n\n  const handleChange = event => {\n    setUserDetails({ ...userDetails,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const checkLogin = () => {\n    if (validator.fieldValid('Username') && validator.fieldValid('Password')) {\n      dispatch(checkAuthCred(userDetails));\n    } else {\n      validator.showMessages();\n      forceUpdate();\n    }\n  };\n\n  const checkOTP = () => {\n    if (validator.fieldValid('OTP')) {\n      var login = `grant_type=password&username=${userDetails.user_name}&password=${otp}`;\n      dispatch(checkAuthOTP(login));\n      setIsLoading(true);\n    } else {\n      validator.showMessages();\n      forceUpdate();\n    }\n  };\n\n  useEffect(() => {\n    if (checkAuthCredResponse) {\n      setIsLoading(checkAuthCredResponse.loadingStatus);\n      setMessageAlert({ ...messageAlert,\n        show: checkAuthCredResponse.responseMessage !== \"\",\n        message: checkAuthCredResponse.responseMessage,\n        type: checkAuthCredResponse.isValidCred ? \"success\" : \"danger\"\n      });\n      setShowOtp(checkAuthCredResponse.isValidCred);\n    }\n  }, [checkAuthCredResponse]);\n  useEffect(() => {\n    if (!(Object.keys(checkAuthOtpResponse).length === 0 && checkAuthOtpResponse.constructor === Object)) {\n      if (checkAuthOtpResponse.valid) {\n        localStorage.setItem(\"token\", checkAuthOtpResponse.access_token);\n        localStorage.setItem(\"login\", checkAuthOtpResponse.valid);\n        localStorage.setItem(\"userName\", checkAuthOtpResponse.userName);\n        localStorage.setItem(\"userId\", checkAuthOtpResponse.userId);\n        localStorage.setItem(\"code\", checkAuthOtpResponse.code);\n        localStorage.setItem(\"encrypt_userId\", checkAuthOtpResponse.encrypt_userId);\n        window.location.reload();\n      } else {\n        setMessageAlert({ ...messageAlert,\n          show: !checkAuthOtpResponse.valid,\n          message: checkAuthOtpResponse.message,\n          type: checkAuthOtpResponse.valid ? \"success\" : \"danger\"\n        });\n        setIsLoading(false);\n      }\n    }\n  }, [checkAuthOtpResponse]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex flex-column flex-root h-100\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login login-2 login-signin-on d-flex flex-column flex-lg-row flex-column-fluid bg-white\",\n      id: \"kt_login\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-aside order-2 order-lg-1 d-flex flex-column-fluid flex-lg-row-auto bgi-size-cover bgi-no-repeat p-7 p-lg-10\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-row-fluid flex-column justify-content-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column-fluid flex-column flex-center mt-5 mt-lg-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"#\",\n              className: \"mb-15 text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"assets/media/logos/logo-letter-1.png\",\n                className: \"max-h-75px\",\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"login-form login-signin\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center mb-10 mb-lg-20\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"font-weight-bold\",\n                  children: \"Sign In\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-muted font-weight-bold\",\n                  children: showOtp ? \"OTP sent on email and whatsapp\" : \"Enter your username and password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(GlobalAlert, {\n                show: messageAlert.show,\n                type: messageAlert.type,\n                message: messageAlert.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"form\",\n                noValidate: \"novalidate\",\n                onSubmit: e => {\n                  e.preventDefault();\n\n                  if (showOtp) {\n                    checkOTP();\n                  } else {\n                    checkLogin();\n                  }\n                },\n                children: [!showOtp ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group py-3 m-0\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"form-control h-auto border-0 px-0 placeholder-dark-75\",\n                      type: \"Email\",\n                      placeholder: \"Username\",\n                      name: \"user_name\",\n                      onChange: handleChange,\n                      autoComplete: \"off\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 130,\n                      columnNumber: 11\n                    }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                      className: \"text-danger\",\n                      children: validator.message('Username', userDetails.user_name, 'required')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 11\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 39\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group py-3 border-top m-0\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"form-control h-auto border-0 px-0 placeholder-dark-75\",\n                      type: \"Password\",\n                      onChange: handleChange,\n                      placeholder: \"Password\",\n                      name: \"password\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 134,\n                      columnNumber: 11\n                    }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                      className: \"text-danger\",\n                      children: validator.message('Password', userDetails.password, 'required')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 135,\n                      columnNumber: 11\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 133,\n                    columnNumber: 10\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group d-flex flex-wrap justify-content-between align-items-center mt-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"checkbox-inline\",\n                      children: /*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"checkbox checkbox-outline m-0 text-muted\",\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"checkbox\",\n                          name: \"remember\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 141,\n                          columnNumber: 12\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 142,\n                          columnNumber: 12\n                        }, this), \"Remember me\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 140,\n                        columnNumber: 12\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 139,\n                      columnNumber: 11\n                    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: \"#\",\n                      id: \"kt_login_forgot\",\n                      className: \"text-muted text-hover-primary\",\n                      children: \"Forgot Password ?\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 11\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 10\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 22\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group py-3 border-top m-0\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"form-control h-auto border-0 px-0 placeholder-dark-75\",\n                    type: \"Password\",\n                    onChange: handleOtp,\n                    placeholder: \"OTP\",\n                    name: \"otp\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                    className: \"text-danger\",\n                    children: validator.message('OTP', otp, 'required|min:4|max:4')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group d-flex flex-wrap justify-content-between align-items-center mt-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    id: \"kt_login_signin_submit\",\n                    className: \"btn btn-primary font-weight-bold w-100 px-9 py-4 my-3\",\n                    disabled: isLoading,\n                    children: isLoading ? /*#__PURE__*/_jsxDEV(\"i\", {\n                      class: \"fas fa-spinner fa-spin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 151,\n                      columnNumber: 147\n                    }, this) : showOtp ? \"Submit\" : \"Sign In\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column-auto justify-content-between mt-15\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-dark-50 font-weight-bold order-2 order-sm-1 my-2\",\n              children: \"Developed and maintained by Rohin Infotech\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"order-1 order-lg-2 flex-column-auto flex-lg-row-fluid d-flex flex-column p-7\",\n        style: {\n          backgroundImage: `url(${bg})`\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-column-fluid flex-lg-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column justify-content-center\",\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"display-2 font-weight-bold my-7 text-white\",\n              children: \"\\u0394IA\\u0393NO\\u2211TIX\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"x/2gvF7C5Yaz3rdTd6ZgoaQtf2I=\", false, function () {\n  return [useDispatch, useForceUpdate, useSelector, useSelector];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/Auth/Login.js"],"names":["React","useEffect","useState","bg","SimpleReactValidator","useForceUpdate","FormHelperText","connect","useDispatch","useSelector","checkAuthCred","checkAuthOTP","GlobalAlert","Login","dispatch","forceUpdate","validator","setValidator","userDetails","setUserDetails","user_name","password","messageAlert","setMessageAlert","show","message","type","isLoading","setIsLoading","checkAuthCredResponse","state","auth","checkAuthOtpResponse","getOtpResponse","otp","setOtp","handleOtp","event","target","value","showOtp","setShowOtp","handleChange","name","checkLogin","fieldValid","showMessages","checkOTP","login","loadingStatus","responseMessage","isValidCred","Object","keys","length","constructor","valid","localStorage","setItem","access_token","userName","userId","code","encrypt_userId","window","location","reload","e","preventDefault","backgroundImage"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport bg from '../../assets/image/bg-5.jpg';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport useForceUpdate from 'use-force-update';\r\nimport { FormHelperText } from '@material-ui/core';\r\nimport { connect, useDispatch, useSelector } from 'react-redux';\r\nimport { checkAuthCred, checkAuthOTP } from '../../_redux/actions/auth.action';\r\nimport GlobalAlert from '../../components/GlobalAlert';\r\n\r\nconst Login = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst forceUpdate = useForceUpdate();\r\n\tconst [validator , setValidator] = useState(new SimpleReactValidator())\r\n\tconst [userDetails , setUserDetails] = useState({\r\n\t\tuser_name:'',\r\n\t\tpassword:''\r\n\t});\r\n\r\n\tconst [messageAlert , setMessageAlert] = useState({\r\n\t\tshow:false,\r\n\t\tmessage:\"\",\r\n\t\ttype:\"\"\r\n\t});\r\n\r\n\tconst [isLoading , setIsLoading] = useState(false);\r\n\r\n\tconst checkAuthCredResponse = useSelector((state) => state.auth);\r\n\tconst checkAuthOtpResponse = useSelector((state) => state.auth.getOtpResponse);\r\n\r\n\tconst [otp , setOtp] = useState('');\r\n\r\n\tconst handleOtp = (event) => {\t\r\n\t\tsetOtp(event.target.value);\r\n\t}\r\n\r\n\tconst [showOtp , setShowOtp] = useState(false);\r\n\r\n\tconst handleChange = (event) => {\r\n\t\tsetUserDetails({...userDetails, \r\n\t\t\t[event.target.name]:event.target.value\r\n\t\t});\r\n\t}\r\n\r\n\tconst checkLogin = () => {\r\n\t\tif(validator.fieldValid('Username') && validator.fieldValid('Password')){\r\n\t\t\tdispatch(checkAuthCred(userDetails))\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvalidator.showMessages();\r\n\t\t\tforceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tconst checkOTP = () => {\r\n\t\tif(validator.fieldValid('OTP')){\r\n\t\t\tvar login = `grant_type=password&username=${userDetails.user_name}&password=${otp}`;\r\n\t\t\tdispatch(checkAuthOTP(login));\r\n\t\t\tsetIsLoading(true);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvalidator.showMessages();\r\n\t\t\tforceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(checkAuthCredResponse){\r\n\t\t\tsetIsLoading(checkAuthCredResponse.loadingStatus);\r\n\t\t\tsetMessageAlert({...messageAlert,\r\n\t\t\t\tshow:checkAuthCredResponse.responseMessage !== \"\",\r\n\t\t    \tmessage:checkAuthCredResponse.responseMessage,\r\n\t\t\t\ttype:checkAuthCredResponse.isValidCred ? \"success\" : \"danger\"\r\n\t\t\t});\r\n\t\t\tsetShowOtp(checkAuthCredResponse.isValidCred);\r\n\t\t}\r\n\t},[checkAuthCredResponse]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif(!(Object.keys(checkAuthOtpResponse).length === 0 && checkAuthOtpResponse.constructor === Object)){\r\n\t\t\tif(checkAuthOtpResponse.valid){\r\n\t\t\t\tlocalStorage.setItem(\"token\",checkAuthOtpResponse.access_token);\r\n\t\t\t\tlocalStorage.setItem(\"login\",checkAuthOtpResponse.valid);\r\n\t\t\t\tlocalStorage.setItem(\"userName\",checkAuthOtpResponse.userName);\r\n\t\t\t\tlocalStorage.setItem(\"userId\",checkAuthOtpResponse.userId);\r\n\t\t\t\tlocalStorage.setItem(\"code\",checkAuthOtpResponse.code);\r\n\t\t\t\tlocalStorage.setItem(\"encrypt_userId\",checkAuthOtpResponse.encrypt_userId);\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tsetMessageAlert({...messageAlert,\r\n\t\t\t\t\tshow:!checkAuthOtpResponse.valid,\r\n\t\t\t\t\tmessage:checkAuthOtpResponse.message,\r\n\t\t\t\t\ttype:checkAuthOtpResponse.valid ? \"success\" : \"danger\"\r\n\t\t\t\t});\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t}\r\n\t\t}\r\n\t},[checkAuthOtpResponse])\r\n\r\n    return(\r\n        <div className=\"d-flex flex-column flex-root h-100\">\r\n\t\t \r\n\t\t\t<div className=\"login login-2 login-signin-on d-flex flex-column flex-lg-row flex-column-fluid bg-white\" id=\"kt_login\">\r\n\t\t\t\t \r\n\t\t\t\t<div className=\"login-aside order-2 order-lg-1 d-flex flex-column-fluid flex-lg-row-auto bgi-size-cover bgi-no-repeat p-7 p-lg-10\">\r\n\t\t\t\t\t \r\n\t\t\t\t\t<div className=\"d-flex flex-row-fluid flex-column justify-content-between\">\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t<div className=\"d-flex flex-column-fluid flex-column flex-center mt-5 mt-lg-0\">\r\n\t\t\t\t\t\t\t<a href=\"#\" className=\"mb-15 text-center\">\r\n\t\t\t\t\t\t\t\t<img src=\"assets/media/logos/logo-letter-1.png\" className=\"max-h-75px\" alt=\"\" />\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t<div className=\"login-form login-signin\">\r\n\t\t\t\t\t\t\t\t<div className=\"text-center mb-10 mb-lg-20\">\r\n\t\t\t\t\t\t\t\t\t<h2 className=\"font-weight-bold\">Sign In</h2>\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted font-weight-bold\">{showOtp ? \"OTP sent on email and whatsapp\" : \"Enter your username and password\"}</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t \t<GlobalAlert show={messageAlert.show} type={messageAlert.type} message={messageAlert.message} />\r\n\t\t\t\t\t\t\t\t<form className=\"form\" noValidate=\"novalidate\" onSubmit={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tif(showOtp){\r\n\t\t\t\t\t\t\t\t\t\tcheckOTP();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\tcheckLogin();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{!showOtp ? <React.Fragment> <div className=\"form-group py-3 m-0\">\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"form-control h-auto border-0 px-0 placeholder-dark-75\" type=\"Email\" placeholder=\"Username\" name=\"user_name\" onChange={handleChange} autoComplete=\"off\" />\r\n\t\t\t\t\t\t\t\t\t\t<FormHelperText className=\"text-danger\">{validator.message('Username', userDetails.user_name , 'required')}</FormHelperText>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group py-3 border-top m-0\">\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"form-control h-auto border-0 px-0 placeholder-dark-75\" type=\"Password\" onChange={handleChange} placeholder=\"Password\" name=\"password\" />\r\n\t\t\t\t\t\t\t\t\t\t<FormHelperText className=\"text-danger\">{validator.message('Password', userDetails.password , 'required')}</FormHelperText>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group d-flex flex-wrap justify-content-between align-items-center mt-3\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"checkbox-inline\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"checkbox checkbox-outline m-0 text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"remember\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<span></span>Remember me</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<a href=\"#\" id=\"kt_login_forgot\" className=\"text-muted text-hover-primary\">Forgot Password ?</a>\r\n\t\t\t\t\t\t\t\t\t</div> </React.Fragment> : <div className=\"form-group py-3 border-top m-0\">\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"form-control h-auto border-0 px-0 placeholder-dark-75\" type=\"Password\" onChange={handleOtp} placeholder=\"OTP\"  name=\"otp\" />\r\n\t\t\t\t\t\t\t\t\t\t<FormHelperText className=\"text-danger\">{validator.message('OTP', otp , 'required|min:4|max:4')}</FormHelperText>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group d-flex flex-wrap justify-content-between align-items-center mt-2\">\r\n\t\t\t\t\t\t\t\t\t\t<button id=\"kt_login_signin_submit\" className=\"btn btn-primary font-weight-bold w-100 px-9 py-4 my-3\" disabled={isLoading}>{isLoading ? <i class=\"fas fa-spinner fa-spin\"></i> : showOtp ? \"Submit\" : \"Sign In\"}</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t<div className=\"d-flex flex-column-auto justify-content-between mt-15\">\r\n\t\t\t\t\t\t\t<div className=\"text-dark-50 font-weight-bold order-2 order-sm-1 my-2\">Developed and maintained by Rohin Infotech</div>\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t \r\n\t\t\t\t</div>\r\n\t\t\t\t \r\n\t\t\t\t<div className=\"order-1 order-lg-2 flex-column-auto flex-lg-row-fluid d-flex flex-column p-7\" style={{backgroundImage:`url(${bg})`}}>\r\n\t\t\t\t\t \r\n\t\t\t\t\t<div className=\"d-flex flex-column-fluid flex-lg-center\">\r\n\t\t\t\t\t\t<div className=\"d-flex flex-column justify-content-center\">\r\n\t\t\t\t\t\t\t<h1 className=\"display-2 font-weight-bold my-7 text-white\">ΔIAΓNO∑TIX</h1>\r\n\t\t\t\t\t\t\t{/* <p className=\"font-weight-bold font-size-lg text-white opacity-80\">The ultimate Bootstrap, Angular 8, React &amp; VueJS admin theme\r\n\t\t\t\t\t\t\t<br />framework for next generation web apps.</p> */}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t \r\n\t\t\t\t</div>\r\n\t\t\t\t \r\n\t\t\t</div>\r\n\t\t\t \r\n\t\t</div>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport  default Login;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/React code/diagnostic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{TextField,MenuItem}from\"@material-ui/core\";import{DataGrid}from\"@mui/x-data-grid\";import React,{useEffect,useState}from\"react\";import{getBrowseUserRight,showErrorToast,showSuccessToast}from\"../../../components/common\";import CustomPagination from\"../../../components/CustomPagination\";import CustomNoRowsOverlay from\"../../../components/customRowComponent\";import{Loader}from\"../../../components/loader\";import{CommonController}from\"../../../_redux/controller/common.controller\";import ActionButtons from\"../../../components/action-buttons\";import{useDispatch,useSelector}from\"react-redux\";import{selectedEmployeeId}from\"../../../_redux/actions/masters/all.action\";import moment from\"moment\";import{DatePicker}from\"@material-ui/pickers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SalesCostingBrowse=function SalesCostingBrowse(_ref){var onEdit=_ref.onEdit;var dispatch=useDispatch();var getuserRightListResponse=useSelector(function(state){return state.common.userRightList;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),browseListData=_useState2[0],setBrowseListData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalRecord=_useState4[0],setTotalRecords=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),markEng=_useState8[0],setMarkEng=_useState8[1];var _useState9=useState({pageNo:1,pageSize:15,filter_value:\"\",sort_column:\"\",sort_order:\"desc\"}),_useState10=_slicedToArray(_useState9,2),params=_useState10[0],setParams=_useState10[1];var _useState11=useState({user_id:\"\",chk_All:\"1\",company_name:\"\",type:\"all\",status:\"all\",mark_engg:\"\",fromDate:null,toDate:null}),_useState12=_slicedToArray(_useState11,2),bodyParam=_useState12[0],setBodyParam=_useState12[1];var handleParams=function handleParams(event){setTimeout(function(){setParams(_objectSpread(_objectSpread({},params),{},_defineProperty({},event.target.name,event.target.value)));},800);};var handleBodyParam=function handleBodyParam(event){setTimeout(function(){setBodyParam(_objectSpread(_objectSpread({},bodyParam),{},_defineProperty({},event.target.name,event.target.value)));},800);};var getBrowseListData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return CommonController.commonApiCall(\"Costing/SalesCostingBrowse\",params,bodyParam).then(function(data){setBrowseListData(data.data);setTotalRecords(data.recordsFiltered);}).catch(function(err){showErrorToast(err);});case 3:setLoading(false);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getBrowseListData(){return _ref2.apply(this,arguments);};}();var getMarkEngList=function getMarkEngList(){CommonController.commonApiCallFilter(\"Dropdown/SalesEnquiryDropdown\").then(function(data){return setMarkEng(data.employeeList);});};var handlePageSizeChange=function handlePageSizeChange(param){setParams(_objectSpread(_objectSpread({},params),{},{pageSize:param.pageSize}));};var handlePageChange=function handlePageChange(param){setParams(_objectSpread(_objectSpread({},params),{},{pageNo:param.page}));};var handleDateChange=function handleDateChange(type,date){setBodyParam(_objectSpread(_objectSpread({},bodyParam),{},_defineProperty({},type,date)));};useEffect(function(){getBrowseListData();getMarkEngList();},[]);useEffect(function(){getBrowseListData();},[params,getuserRightListResponse,bodyParam]);var handleEdit=function handleEdit(id){dispatch(selectedEmployeeId(id));onEdit();};var handleDeleteRow=function handleDeleteRow(id){CommonController.commonApiCallFilter(\"Employee/EmployeeMasterDelete\",{employee_id:id}).then(function(data){if(data.valid){showSuccessToast(\"Record Deleted Successfully\");getBrowseListData();}else{showErrorToast(\"Something went wrong\");}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(\"div\",{className:\"filter_box mb-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1 d-flex align-items-center\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0\",children:\"Filters\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"outlined-basic\",size:\"small\",onKeyDown:function onKeyDown(e){if(e.keyCode===13){handleParams(e);}},name:\"filter_value\",label:\"Search\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(DatePicker,{label:\"From Date\",value:bodyParam.fromDate,format:\"dd/MM/yyyy\",onChange:function onChange(date){return handleDateChange(\"fromDate\",date);},animateYearScrolling:true,inputVariant:\"outlined\",size:\"small\",fullWidth:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(DatePicker,{label:\"To Date\",value:bodyParam.toDate,format:\"dd/MM/yyyy\",onChange:function onChange(date){return handleDateChange(\"toDate\",date);},animateYearScrolling:true,inputVariant:\"outlined\",size:\"small\",fullWidth:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"outlined-basic\",size:\"small\",onKeyDown:function onKeyDown(e){if(e.keyCode===13){handleBodyParam(e);}},name:\"party_name\",label:\"Company Name\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1\",children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,id:\"outlined-basic\",size:\"small\",onChange:function onChange(e){handleBodyParam(e);},name:\"type\",select:true,label:\"Type\",variant:\"outlined\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"spares\",children:\"Spares\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"projects\",children:\"Projects\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"service\",children:\"Service\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1\",children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,id:\"outlined-basic\",size:\"small\",onChange:function onChange(e){handleBodyParam(e);},select:true,name:\"status\",label:\"Status\",variant:\"outlined\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"spares\",children:\"Close\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"spares\",children:\"Open\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2 mt-3\",children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,id:\"outlined-basic\",size:\"small\",onChange:function onChange(e){handleBodyParam(e);},select:true,name:\"mark_engg\",label:\"Marketing Eng.\",variant:\"outlined\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"None\"}),markEng&&markEng.map(function(eng,indx){return/*#__PURE__*/_jsx(MenuItem,{value:eng.value,children:eng.value},indx);})]})})]})}),/*#__PURE__*/_jsx(\"div\",{style:{height:400,width:\"100%\"},children:/*#__PURE__*/_jsx(DataGrid,{columns:[{field:\"id\",headerName:\"Sr. no\",width:80},{field:\"date\",headerName:\"Date\",width:100},{field:\"riv\",headerName:\"Costing No\",width:120},{field:\"company_id\",headerName:\"Comp Id\",width:100},{field:\"company_name\",headerName:\"Company Name\",width:200},{field:\"mark_engg\",headerName:\"Marketing Eng.\",width:150},{field:\"type\",headerName:\"Type\",width:100},{field:\"status_name\",headerName:\"Status\",width:100},{field:\"reference_name\",headerName:\"Reference\",width:120},{field:\"description\",headerName:\"Description\",width:200},{field:\"\",headerName:\"Actions\",renderCell:function renderCell(params){var _getBrowseUserRight,_getBrowseUserRight2,_getBrowseUserRight3;return/*#__PURE__*/_jsx(ActionButtons,{onPreview:((_getBrowseUserRight=getBrowseUserRight(getuserRightListResponse))===null||_getBrowseUserRight===void 0?void 0:_getBrowseUserRight.view_right)==\"True\"?function(){return handleEdit(params.row.id);}:null,onEdit:((_getBrowseUserRight2=getBrowseUserRight(getuserRightListResponse))===null||_getBrowseUserRight2===void 0?void 0:_getBrowseUserRight2.edit_button)==\"True\"?function(){return handleEdit(params.row.id);}:null,onDelete:((_getBrowseUserRight3=getBrowseUserRight(getuserRightListResponse))===null||_getBrowseUserRight3===void 0?void 0:_getBrowseUserRight3.delete_right)==\"True\"?function(){return handleDeleteRow(params.row.id);}:null});},width:100}],pagination:true,disableColumnFilter:true,pageSize:params.pageSize,page:params.pageNo,rowsPerPageOptions:[10,15,25,100],rowCount:totalRecord,paginationMode:\"server\",onPageSizeChange:handlePageSizeChange,onPageChange:handlePageChange,loading:loading,rowHeight:30//components={{\n//Pagination: CustomPagination,\n//NoRowsOverlay: CustomNoRowsOverlay,\n//       }}\n,onSortModelChange:function onSortModelChange(sort){if(sort.length>0){setParams(_objectSpread(_objectSpread({},params),{},{sort_column:sort[0].field,sort_order:sort[0].sort}));}},rows:browseListData})})]});};export default SalesCostingBrowse;","map":{"version":3,"sources":["F:/React code/diagnostic/src/pages/Sales/Sales Costing/browse.js"],"names":["TextField","MenuItem","DataGrid","React","useEffect","useState","getBrowseUserRight","showErrorToast","showSuccessToast","CustomPagination","CustomNoRowsOverlay","Loader","CommonController","ActionButtons","useDispatch","useSelector","selectedEmployeeId","moment","DatePicker","SalesCostingBrowse","onEdit","dispatch","getuserRightListResponse","state","common","userRightList","browseListData","setBrowseListData","totalRecord","setTotalRecords","loading","setLoading","markEng","setMarkEng","pageNo","pageSize","filter_value","sort_column","sort_order","params","setParams","user_id","chk_All","company_name","type","status","mark_engg","fromDate","toDate","bodyParam","setBodyParam","handleParams","event","setTimeout","target","name","value","handleBodyParam","getBrowseListData","commonApiCall","then","data","recordsFiltered","catch","err","getMarkEngList","commonApiCallFilter","employeeList","handlePageSizeChange","param","handlePageChange","page","handleDateChange","date","handleEdit","id","handleDeleteRow","employee_id","valid","e","keyCode","map","eng","indx","height","width","field","headerName","renderCell","view_right","row","edit_button","delete_right","sort","length"],"mappings":"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","sourcesContent":["import { TextField, MenuItem } from \"@material-ui/core\";\nimport { DataGrid } from \"@mui/x-data-grid\";\nimport React, { useEffect, useState } from \"react\";\nimport {\n  getBrowseUserRight,\n  showErrorToast,\n  showSuccessToast,\n} from \"../../../components/common\";\nimport CustomPagination from \"../../../components/CustomPagination\";\nimport CustomNoRowsOverlay from \"../../../components/customRowComponent\";\nimport { Loader } from \"../../../components/loader\";\nimport { CommonController } from \"../../../_redux/controller/common.controller\";\nimport ActionButtons from \"../../../components/action-buttons\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectedEmployeeId } from \"../../../_redux/actions/masters/all.action\";\n\nimport moment from \"moment\";\n\nimport { DatePicker } from \"@material-ui/pickers\";\n\nconst SalesCostingBrowse = ({ onEdit }) => {\n  const dispatch = useDispatch();\n\n  const getuserRightListResponse = useSelector(\n    (state) => state.common.userRightList\n  );\n\n  const [browseListData, setBrowseListData] = useState([]);\n  const [totalRecord, setTotalRecords] = useState(0);\n  const [loading, setLoading] = useState(false);\n\n  const [markEng, setMarkEng] = useState(null);\n\n  const [params, setParams] = useState({\n    pageNo: 1,\n    pageSize: 15,\n    filter_value: \"\",\n    sort_column: \"\",\n    sort_order: \"desc\",\n  });\n\n  const [bodyParam, setBodyParam] = useState({\n    user_id: \"\",\n    chk_All: \"1\",\n    company_name: \"\",\n    type: \"all\",\n    status: \"all\",\n    mark_engg: \"\",\n    fromDate: null,\n    toDate: null,\n  });\n\n  const handleParams = (event) => {\n    setTimeout(() => {\n      setParams({ ...params, [event.target.name]: event.target.value });\n    }, 800);\n  };\n\n  const handleBodyParam = (event) => {\n    setTimeout(() => {\n      setBodyParam({ ...bodyParam, [event.target.name]: event.target.value });\n    }, 800);\n  };\n\n  const getBrowseListData = async () => {\n    setLoading(true);\n    await CommonController.commonApiCall(\n      \"Costing/SalesCostingBrowse\",\n      params,\n      bodyParam\n    )\n      .then((data) => {\n        setBrowseListData(data.data);\n        setTotalRecords(data.recordsFiltered);\n      })\n      .catch((err) => {\n        showErrorToast(err);\n      });\n    setLoading(false);\n  };\n\n  const getMarkEngList = () => {\n    CommonController.commonApiCallFilter(\"Dropdown/SalesEnquiryDropdown\").then(\n      (data) => setMarkEng(data.employeeList)\n    );\n  };\n\n  const handlePageSizeChange = (param) => {\n    setParams({ ...params, pageSize: param.pageSize });\n  };\n  const handlePageChange = (param) => {\n    setParams({ ...params, pageNo: param.page });\n  };\n\n  const handleDateChange = (type, date) => {\n    setBodyParam({ ...bodyParam, [type]: date });\n  };\n\n  useEffect(() => {\n    getBrowseListData();\n\n    getMarkEngList();\n  }, []);\n\n  useEffect(() => {\n    getBrowseListData();\n  }, [params, getuserRightListResponse, bodyParam]);\n\n  const handleEdit = (id) => {\n    dispatch(selectedEmployeeId(id));\n    onEdit();\n  };\n\n  const handleDeleteRow = (id) => {\n    CommonController.commonApiCallFilter(\"Employee/EmployeeMasterDelete\", {\n      employee_id: id,\n    }).then((data) => {\n      if (data.valid) {\n        showSuccessToast(\"Record Deleted Successfully\");\n        getBrowseListData();\n      } else {\n        showErrorToast(\"Something went wrong\");\n      }\n    });\n  };\n\n  return (\n    <>\n      {loading && <Loader />}\n\n      <div className=\"filter_box mb-5\">\n        <div className=\"row\">\n          <div className=\"col-md-1 d-flex align-items-center\">\n            <h4 className=\"mb-0\">Filters</h4>\n          </div>\n\n          <div className=\"col-md-2\">\n            <TextField\n              fullWidth\n              id=\"outlined-basic\"\n              size=\"small\"\n              onKeyDown={(e) => {\n                if (e.keyCode === 13) {\n                  handleParams(e);\n                }\n              }}\n              name=\"filter_value\"\n              label=\"Search\"\n              variant=\"outlined\"\n            />\n          </div>\n          <div className=\"col-md-2\">\n            <DatePicker\n              label=\"From Date\"\n              value={bodyParam.fromDate}\n              format=\"dd/MM/yyyy\"\n              onChange={(date) => handleDateChange(\"fromDate\", date)}\n              animateYearScrolling\n              inputVariant=\"outlined\"\n              size=\"small\"\n              fullWidth\n            />\n          </div>\n          <div className=\"col-md-2\">\n            <DatePicker\n              label=\"To Date\"\n              value={bodyParam.toDate}\n              format=\"dd/MM/yyyy\"\n              onChange={(date) => handleDateChange(\"toDate\", date)}\n              animateYearScrolling\n              inputVariant=\"outlined\"\n              size=\"small\"\n              fullWidth\n            />\n          </div>\n          <div className=\"col-md-2\">\n            <TextField\n              fullWidth\n              id=\"outlined-basic\"\n              size=\"small\"\n              onKeyDown={(e) => {\n                if (e.keyCode === 13) {\n                  handleBodyParam(e);\n                }\n              }}\n              name=\"party_name\"\n              label=\"Company Name\"\n              variant=\"outlined\"\n            />\n          </div>\n          <div className=\"col-md-1\">\n            <TextField\n              fullWidth\n              id=\"outlined-basic\"\n              size=\"small\"\n              onChange={(e) => {\n                handleBodyParam(e);\n              }}\n              name=\"type\"\n              select\n              label=\"Type\"\n              variant=\"outlined\"\n            >\n              <MenuItem value={\"all\"}>All</MenuItem>\n              <MenuItem value={\"spares\"}>Spares</MenuItem>\n              <MenuItem value={\"projects\"}>Projects</MenuItem>\n              <MenuItem value={\"service\"}>Service</MenuItem>\n            </TextField>\n          </div>\n          <div className=\"col-md-1\">\n            <TextField\n              fullWidth\n              id=\"outlined-basic\"\n              size=\"small\"\n              onChange={(e) => {\n                handleBodyParam(e);\n              }}\n              select\n              name=\"status\"\n              label=\"Status\"\n              variant=\"outlined\"\n            >\n              <MenuItem value={\"all\"}>All</MenuItem>\n              <MenuItem value={\"spares\"}>Close</MenuItem>\n              <MenuItem value={\"spares\"}>Open</MenuItem>\n            </TextField>\n          </div>\n          <div className=\"col-md-2 mt-3\">\n            <TextField\n              fullWidth\n              id=\"outlined-basic\"\n              size=\"small\"\n              onChange={(e) => {\n                handleBodyParam(e);\n              }}\n              select\n              name=\"mark_engg\"\n              label=\"Marketing Eng.\"\n              variant=\"outlined\"\n            >\n              <MenuItem value={\"\"}>None</MenuItem>\n              {markEng &&\n                markEng.map((eng, indx) => {\n                  return (\n                    <MenuItem value={eng.value} key={indx}>\n                      {eng.value}\n                    </MenuItem>\n                  );\n                })}\n            </TextField>\n          </div>\n        </div>\n      </div>\n      {/* Update remarks modal */}\n\n      <div style={{ height: 400, width: \"100%\" }}>\n        <DataGrid\n          columns={[\n            {\n              field: \"id\",\n              headerName: \"Sr. no\",\n              width: 80,\n            },\n            {\n              field: \"date\",\n              headerName: \"Date\",\n              width: 100,\n            },\n            {\n              field: \"riv\",\n              headerName: \"Costing No\",\n              width: 120,\n            },\n            {\n              field: \"company_id\",\n              headerName: \"Comp Id\",\n              width: 100,\n            },\n            {\n              field: \"company_name\",\n              headerName: \"Company Name\",\n              width: 200,\n            },\n            {\n              field: \"mark_engg\",\n              headerName: \"Marketing Eng.\",\n              width: 150,\n            },\n\n            {\n              field: \"type\",\n              headerName: \"Type\",\n              width: 100,\n            },\n            {\n              field: \"status_name\",\n              headerName: \"Status\",\n              width: 100,\n            },\n            {\n              field: \"reference_name\",\n              headerName: \"Reference\",\n              width: 120,\n            },\n            {\n              field: \"description\",\n              headerName: \"Description\",\n              width: 200,\n            },\n\n            {\n              field: \"\",\n              headerName: \"Actions\",\n              renderCell: (params) => (\n                <ActionButtons\n                  onPreview={\n                    getBrowseUserRight(getuserRightListResponse)?.view_right ==\n                    \"True\"\n                      ? () => handleEdit(params.row.id)\n                      : null\n                  }\n                  onEdit={\n                    getBrowseUserRight(getuserRightListResponse)?.edit_button ==\n                    \"True\"\n                      ? () => handleEdit(params.row.id)\n                      : null\n                  }\n                  onDelete={\n                    getBrowseUserRight(getuserRightListResponse)\n                      ?.delete_right == \"True\"\n                      ? () => handleDeleteRow(params.row.id)\n                      : null\n                  }\n                />\n              ),\n              width: 100,\n            },\n          ]}\n          pagination\n          disableColumnFilter\n          pageSize={params.pageSize}\n          page={params.pageNo}\n          rowsPerPageOptions={[10, 15, 25, 100]}\n          rowCount={totalRecord}\n          paginationMode=\"server\"\n          onPageSizeChange={handlePageSizeChange}\n          onPageChange={handlePageChange}\n          loading={loading}\n          rowHeight={30}\n          //components={{\n          //Pagination: CustomPagination,\n          //NoRowsOverlay: CustomNoRowsOverlay,\n          //       }}\n          onSortModelChange={(sort) => {\n            if (sort.length > 0) {\n              setParams({\n                ...params,\n                sort_column: sort[0].field,\n                sort_order: sort[0].sort,\n              });\n            }\n          }}\n          rows={browseListData}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default SalesCostingBrowse;\n"]},"metadata":{},"sourceType":"module"}